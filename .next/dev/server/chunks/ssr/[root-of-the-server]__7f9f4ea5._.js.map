{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/joet/Downloads/joetemulator/src/lib/constants.ts"],"sourcesContent":["// Shared constants for emulator systems and file extensions\n\nexport const FILE_EXTENSIONS: Record<string, string> = {\n  fds: \"nes\",\n  nes: \"nes\",\n  unif: \"nes\",\n  unf: \"nes\",\n  gb: \"gb\",\n  gbc: \"gbc\",\n  gba: \"gba\",\n  smc: \"snes\",\n  sfc: \"snes\",\n  swc: \"snes\",\n  vb: \"vb\",\n  vboy: \"vb\",\n  z64: \"n64\",\n  n64: \"n64\",\n  nds: \"nds\",\n  sms: \"segaMS\",\n  md: \"segaMD\",\n  gen: \"segaMD\",\n  smd: \"segaMD\",\n  gg: \"segaGG\",\n  \"32x\": \"sega32x\",\n  cso: \"psp\",\n  pbp: \"psp\",\n  a26: \"atari2600\",\n  a52: \"atari5200\",\n  a78: \"atari7800\",\n  lnx: \"lynx\",\n  j64: \"jaguar\",\n  jag: \"jaguar\",\n  d64: \"vice_x64\",\n  t64: \"vice_x64\",\n  tap: \"vice_x64\",\n  crt: \"vice_x64\",\n  col: \"coleco\",\n  cv: \"coleco\",\n  pce: \"pce\",\n  ngp: \"ngp\",\n  ngc: \"ngp\",\n  ws: \"ws\",\n  wsc: \"ws\"\n};\n\nexport const SYSTEM_PICKER: Record<string, Record<string, string>> = {\n  \"Nintendo\": {\n    \"NES\": \"nes\",\n    \"Game Boy\": \"gb\",\n    \"Game Boy Color\": \"gbc\",\n    \"Game Boy Advance\": \"gba\",\n    \"SNES\": \"snes\",\n    \"Virtual Boy\": \"vb\",\n    \"N64\": \"n64\",\n    \"DS\": \"nds\",\n  },\n  \"Sega\": {\n    \"Master System\": \"segaMS\",\n    \"Genesis/Mega Drive\": \"segaMD\",\n    \"Game Gear\": \"segaGG\",\n    \"CD\": \"segaCD\",\n    \"32X\": \"sega32x\",\n    \"Saturn\": \"segaSaturn\",\n  },\n  \"Sony\": {\n    \"PS1\": \"psx\",\n    \"PSP\": \"psp\",\n  },\n  \"Atari\": {\n    \"2600\": \"atari2600\",\n    \"5200\": \"atari5200\",\n    \"7800\": \"atari7800\",\n    \"Lynx\": \"lynx\",\n    \"Jaguar\": \"jaguar\",\n  },\n  \"Other\": {\n    \"Panasonic 3DO\": \"opera\",\n    \"Arcade (FBNeo)\": \"arcade\",\n    \"Arcade (M.A.M.E)\": \"mame2003_plus\",\n    \"Microsoft DOS\": \"dosbox_pure\",\n    \"Commodore PET\": \"vice_xpet\",\n    \"Commodore VIC-20\": \"vice_xvic\",\n    \"Commodore Amiga\": \"amiga\",\n    \"Commodore 64\": \"vice_x64\",\n    \"Commodore 128\": \"vice_x128\",\n    \"Commodore Plus/4\": \"vice_xplus4\",\n    \"ColecoVision\": \"coleco\",\n    \"NEC TurboGrafx-16\": \"pce\",\n    \"NEC PC-FX\": \"pcfx\",\n    \"SNK Neo Geo Pocket\": \"ngp\",\n    \"Bandai WonderSwan\": \"ws\"\n  }\n};\n\n// Flatten SYSTEM_PICKER for reverse lookups (core to system name)\nexport function getSystemNameByCore(core: string): string {\n  for (const category of Object.values(SYSTEM_PICKER)) {\n    for (const [name, systemCore] of Object.entries(category)) {\n      if (systemCore === core) {\n        return name;\n      }\n    }\n  }\n  return 'Unknown System';\n}\n\n// Create a flat version of SYSTEM_PICKER for backwards compatibility\nexport const SYSTEM_PICKER_FLAT: Record<string, string> = {};\nObject.values(SYSTEM_PICKER).forEach(category => {\n  Object.assign(SYSTEM_PICKER_FLAT, category);\n});\n\n"],"names":[],"mappings":"AAAA,4DAA4D;;;;;;;;;;;AAErD,MAAM,kBAA0C;IACrD,KAAK;IACL,KAAK;IACL,MAAM;IACN,KAAK;IACL,IAAI;IACJ,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,IAAI;IACJ,MAAM;IACN,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,IAAI;IACJ,KAAK;IACL,KAAK;IACL,IAAI;IACJ,OAAO;IACP,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,IAAI;IACJ,KAAK;IACL,KAAK;IACL,KAAK;IACL,IAAI;IACJ,KAAK;AACP;AAEO,MAAM,gBAAwD;IACnE,YAAY;QACV,OAAO;QACP,YAAY;QACZ,kBAAkB;QAClB,oBAAoB;QACpB,QAAQ;QACR,eAAe;QACf,OAAO;QACP,MAAM;IACR;IACA,QAAQ;QACN,iBAAiB;QACjB,sBAAsB;QACtB,aAAa;QACb,MAAM;QACN,OAAO;QACP,UAAU;IACZ;IACA,QAAQ;QACN,OAAO;QACP,OAAO;IACT;IACA,SAAS;QACP,QAAQ;QACR,QAAQ;QACR,QAAQ;QACR,QAAQ;QACR,UAAU;IACZ;IACA,SAAS;QACP,iBAAiB;QACjB,kBAAkB;QAClB,oBAAoB;QACpB,iBAAiB;QACjB,iBAAiB;QACjB,oBAAoB;QACpB,mBAAmB;QACnB,gBAAgB;QAChB,iBAAiB;QACjB,oBAAoB;QACpB,gBAAgB;QAChB,qBAAqB;QACrB,aAAa;QACb,sBAAsB;QACtB,qBAAqB;IACvB;AACF;AAGO,SAAS,oBAAoB,IAAY;IAC9C,KAAK,MAAM,YAAY,OAAO,MAAM,CAAC,eAAgB;QACnD,KAAK,MAAM,CAAC,MAAM,WAAW,IAAI,OAAO,OAAO,CAAC,UAAW;YACzD,IAAI,eAAe,MAAM;gBACvB,OAAO;YACT;QACF;IACF;IACA,OAAO;AACT;AAGO,MAAM,qBAA6C,CAAC;AAC3D,OAAO,MAAM,CAAC,eAAe,OAAO,CAAC,CAAA;IACnC,OAAO,MAAM,CAAC,oBAAoB;AACpC"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///home/joet/Downloads/joetemulator/src/lib/ejsConfig.js"],"sourcesContent":["const DEFAULT_EJS_COLOR = '#003d8c';\nconst HEX_PATTERN = /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;\nconst THREADS_ENABLED = ['psp', 'dosbox_pure'];\n\nconst ensureHexColor = (value) => {\n  if (typeof value !== 'string') return DEFAULT_EJS_COLOR;\n  const trimmed = value.trim();\n  return HEX_PATTERN.test(trimmed) ? trimmed : DEFAULT_EJS_COLOR;\n};\n\nconst configureEjs = (options = {}) => {\n  if (typeof window === 'undefined') return;\n\n  const {\n    gameName = '',\n    gameFile = '',\n    core = 'nes',\n    themeColor,\n    cdnPath = ''\n  } = options;\n\n  window.EJS_color = ensureHexColor(themeColor);\n  window.EJS_backgroundColor = '#000000';\n  window.EJS_player = '#game';\n  window.EJS_gameName = gameName;\n  window.EJS_gameUrl = gameFile;\n  window.EJS_core = core;\n  window.EJS_pathtodata = cdnPath;\n  window.EJS_startOnLoaded = true;\n  window.EJS_biosUrl = '';\n\n  window.EJS_threads = THREADS_ENABLED.includes(core);\n\n  window.EJS_defaultOptions = {\n    'save-save-interval': '60',\n    'desmume_advanced_timing': 'disabled',\n    'webgl2Enabled': 'enabled',\n    ...(core === 'segaGG' ? { retroarch_core: 'genesis_plus_gx' } : {}),\n    ...(core === 'nds' ? { retroarch_core: 'desmume' } : {})\n  };\n\n  window.EJS_Buttons = {\n    exitEmulation: false,\n    cacheManager: false,\n    saveSavFiles: { visible: false },\n    loadSavFiles: { visible: false }\n  };\n};\n\nif (typeof window !== 'undefined') {\n  window.configureEjs = configureEjs;\n}\n\nexport { configureEjs };\n"],"names":[],"mappings":";;;;AAAA,MAAM,oBAAoB;AAC1B,MAAM,cAAc;AACpB,MAAM,kBAAkB;IAAC;IAAO;CAAc;AAE9C,MAAM,iBAAiB,CAAC;IACtB,IAAI,OAAO,UAAU,UAAU,OAAO;IACtC,MAAM,UAAU,MAAM,IAAI;IAC1B,OAAO,YAAY,IAAI,CAAC,WAAW,UAAU;AAC/C;AAEA,MAAM,eAAe,CAAC,UAAU,CAAC,CAAC;IAChC,wCAAmC;;;IAEnC,MACE,sBACA,sBACA,kBACA,wBACA;AA6BJ;AAEA"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///home/joet/Downloads/joetemulator/src/lib/emulator.ts"],"sourcesContent":["import { FILE_EXTENSIONS, SYSTEM_PICKER_FLAT } from './constants';\nimport { configureEjs } from './ejsConfig';\n\nconst CDN_PATH = \"https://cdn.jsdelivr.net/gh/joethun/EmulatorJS-With-Cores/\";\nconst DEFAULT_EJS_COLOR = \"#003d8c\";\n\nconst ensureHexColor = (value?: string): string => {\n  if (!value) return DEFAULT_EJS_COLOR;\n  const trimmed = value.trim();\n  const hexPattern = /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;\n  return hexPattern.test(trimmed) ? trimmed : DEFAULT_EJS_COLOR;\n};\n\ndeclare global {\n  interface Window {\n    [key: string]: any;\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.gameRunning = false;\n}\n\nasync function detectCore(extension: string): Promise<string> {\n  if (FILE_EXTENSIONS[extension]) {\n    return FILE_EXTENSIONS[extension];\n  }\n  \n  // Fallback to NES if system picker not available\n  return new Promise((resolve) => {\n    if (typeof window !== 'undefined' && window.showSystemPicker) {\n      window.showSystemPicker(SYSTEM_PICKER_FLAT, resolve);\n    } else {\n      resolve(\"nes\");\n    }\n  });\n}\n\nfunction toggleMenuElements(show: boolean) {\n  if (typeof document === 'undefined') return;\n  \n  ['aside', 'footer', 'main', 'header'].forEach(selector => {\n    const element = document.querySelector(selector);\n    if (element) {\n      (element as HTMLElement).style.cssText = show \n        ? '' \n        : `display: none !important; visibility: hidden !important; z-index: -1 !important;`;\n    }\n  });\n  \n  const rootDiv = document.querySelector('div[style*=\"min-h-screen\"]');\n  if (rootDiv && !show) {\n    (rootDiv as HTMLElement).style.cssText += \" z-index: -1 !important;\";\n  }\n}\n\nfunction cleanupOldElements() {\n  const gameContainer = document.getElementById(\"game\");\n  if (gameContainer) {\n    gameContainer.innerHTML = \"\";\n    gameContainer.style.display = \"none\";\n  }\n  \n  // Remove old emulator scripts\n  const oldScripts = document.querySelectorAll('script[src*=\"loader.js\"]');\n  oldScripts.forEach(script => script.remove());\n  \n  // Restore menu visibility\n  toggleMenuElements(true);\n  \n  window.gameRunning = false;\n}\nfunction hideMenu() {\n  toggleMenuElements(false);\n}\n\nconst GAME_CONTAINER_STYLES = `\n  width: 100%;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999999;\n  background-color: #000000;\n  overflow: hidden;\n  display: block !important;\n  visibility: visible !important;\n  opacity: 1 !important;\n`;\n\nfunction createGameDisplay() {\n  if (typeof document === 'undefined') return;\n  \n  let gameContainer = document.getElementById(\"game\");\n  if (!gameContainer) {\n    gameContainer = document.createElement(\"div\");\n    gameContainer.id = \"game\";\n    document.body.appendChild(gameContainer);\n  }\n  \n  gameContainer.innerHTML = \"\";\n  (gameContainer as HTMLElement).style.cssText = GAME_CONTAINER_STYLES;\n  \n  // Prevent scrolling\n  if (document.body) document.body.style.overflow = \"hidden\";\n  if (document.documentElement) document.documentElement.style.overflow = \"hidden\";\n}\n\nexport async function loadGame(file: File | string, coreOverride?: string, themeColor?: string): Promise<void> {\n  const fileName = file instanceof File ? file.name : file;\n  const fileExtension = fileName.split(\".\").pop()?.toLowerCase() || \"\";\n  const gameName = fileName.substring(0, fileName.lastIndexOf(\".\"));\n  \n  const core = coreOverride || await detectCore(fileExtension);\n  \n  cleanupOldElements();\n  hideMenu();\n  createGameDisplay();\n  if (typeof window !== 'undefined') {\n    window.gameRunning = true;\n  }\n  \n  configureEmulator(gameName, file, core, themeColor);\n  loadEmulatorScript();\n}\n\nfunction configureEmulator(gameName: string, gameFile: File | string, core: string, themeColor?: string) {\n  configureEjs({\n    gameName,\n    gameFile,\n    core,\n    themeColor,\n    cdnPath: CDN_PATH\n  });\n}\n\nfunction loadEmulatorScript() {\n  if (typeof document === 'undefined') return;\n  \n  const script = document.createElement(\"script\");\n  script.src = `${CDN_PATH}/loader.js`;\n  script.onload = () => {\n    setTimeout(() => {\n      const gameContainer = document.getElementById(\"game\");\n      if (gameContainer) {\n        (gameContainer as HTMLElement).style.cssText = GAME_CONTAINER_STYLES.replace(/\\n/g, ' ').replace(/\\s+/g, ' ').trim() + ' !important';\n        \n        const canvas = gameContainer.querySelector('canvas');\n        if (canvas) {\n          (canvas as HTMLElement).style.cssText = `\n            display: block !important;\n            visibility: visible !important;\n            opacity: 1 !important;\n            width: 100% !important;\n            height: 100% !important;\n          `;\n        }\n      }\n    }, 100);\n  };\n  document.body.appendChild(script);\n}\n\nfunction getEmulator() {\n  if (typeof window === 'undefined') return null;\n  return window.EJS_emulator?.started ? window.EJS_emulator : null;\n}\n\nexport async function saveState(): Promise<void> {\n  const emulator = getEmulator();\n  if (!emulator) return;\n\n  try {\n    const state = emulator.gameManager.getState();\n    const stateFileName = `${emulator.getBaseFileName()}.state`;\n    await emulator.storage.states.put(stateFileName, state);\n    emulator.displayMessage(\"SAVED STATE TO BROWSER\");\n  } catch (error: any) {\n    console.error(\"Save failed:\", error);\n    emulator.displayMessage(`Error saving: ${error.message}`);\n  }\n}\n\nexport async function loadState(): Promise<void> {\n  const emulator = getEmulator();\n  if (!emulator) return;\n\n  try {\n    const stateFileName = `${emulator.getBaseFileName()}.state`;\n    const state = await emulator.storage.states.get(stateFileName);\n    if (state) {\n      await emulator.gameManager.loadState(state);\n      emulator.displayMessage(\"LOADED STATE FROM BROWSER\");\n    } else {\n      emulator.displayMessage(\"\");\n    }\n  } catch (error: any) {\n    console.error(\"Load failed:\", error);\n    emulator.displayMessage(`Error loading: ${error.message}`);\n  }\n}\n\nexport function exitGame() {\n  cleanupOldElements();\n  const gameContainer = document.getElementById(\"game\");\n  if (gameContainer) {\n    gameContainer.style.display = \"none\";\n  }\n}\n\nexport function addEventListeners() {\n  if (typeof document === 'undefined') return;\n  \n  document.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"F1\") {\n      event.preventDefault();\n      saveState();\n    } else if (event.key === \"F2\") {\n      event.preventDefault();\n      loadState();\n    } else if (event.key === \"Escape\" && window.gameRunning) {\n      event.preventDefault();\n      exitGame();\n    }\n  });\n}\n\n// Expose functions to window for global access\nif (typeof window !== 'undefined') {\n  window.cleanupOldElements = cleanupOldElements;\n  window.hideMenu = hideMenu;\n  window.createGameDisplay = createGameDisplay;\n}\n\n// Initialize event listeners when DOM is ready\nif (typeof document !== 'undefined') {\n  if (document.readyState === 'loading') {\n    document.addEventListener(\"DOMContentLoaded\", addEventListeners);\n  } else {\n    addEventListeners();\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///home/joet/Downloads/joetemulator/src/lib/storage.ts"],"sourcesContent":["// IndexedDB storage for large game files\n\nconst DB_NAME = 'joetemulator';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'gameFiles';\n\nlet db: IDBDatabase | null = null;\n\nfunction openDB(): Promise<IDBDatabase> {\n  return new Promise((resolve, reject) => {\n    if (typeof window === 'undefined' || !window.indexedDB) {\n      reject(new Error('IndexedDB not supported'));\n      return;\n    }\n\n    if (db) {\n      resolve(db);\n      return;\n    }\n\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onerror = () => reject(request.error);\n    request.onsuccess = () => {\n      db = request.result;\n      resolve(db);\n    };\n\n    request.onupgradeneeded = (event) => {\n      const database = (event.target as IDBOpenDBRequest).result;\n      if (!database.objectStoreNames.contains(STORE_NAME)) {\n        database.createObjectStore(STORE_NAME);\n      }\n    };\n  });\n}\n\nasync function executeStoreOperation<T>(\n  mode: IDBTransactionMode,\n  operation: (store: IDBObjectStore) => IDBRequest<T>\n): Promise<T> {\n  const database = await openDB();\n  return new Promise((resolve, reject) => {\n    const transaction = database.transaction([STORE_NAME], mode);\n    const store = transaction.objectStore(STORE_NAME);\n    const request = operation(store);\n    \n    request.onerror = () => reject(request.error);\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n\nexport async function saveGameFile(gameId: number, file: File): Promise<void> {\n  await executeStoreOperation('readwrite', (store) => store.put(file, gameId));\n}\n\nexport async function getGameFile(gameId: number): Promise<File | null> {\n  const result = await executeStoreOperation('readonly', (store) => store.get(gameId));\n  return result || null;\n}\n\nexport async function deleteGameFile(gameId: number): Promise<void> {\n  await executeStoreOperation('readwrite', (store) => store.delete(gameId));\n}\n\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;;;;AAEzC,MAAM,UAAU;AAChB,MAAM,aAAa;AACnB,MAAM,aAAa;AAEnB,IAAI,KAAyB;AAE7B,SAAS;IACP,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,wCAAwD;YACtD,OAAO,IAAI,MAAM;YACjB;QACF;;;QAOA,MAAM;IAcR;AACF;AAEA,eAAe,sBACb,IAAwB,EACxB,SAAmD;IAEnD,MAAM,WAAW,MAAM;IACvB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,cAAc,SAAS,WAAW,CAAC;YAAC;SAAW,EAAE;QACvD,MAAM,QAAQ,YAAY,WAAW,CAAC;QACtC,MAAM,UAAU,UAAU;QAE1B,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;QAC5C,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;IAClD;AACF;AAEO,eAAe,aAAa,MAAc,EAAE,IAAU;IAC3D,MAAM,sBAAsB,aAAa,CAAC,QAAU,MAAM,GAAG,CAAC,MAAM;AACtE;AAEO,eAAe,YAAY,MAAc;IAC9C,MAAM,SAAS,MAAM,sBAAsB,YAAY,CAAC,QAAU,MAAM,GAAG,CAAC;IAC5E,OAAO,UAAU;AACnB;AAEO,eAAe,eAAe,MAAc;IACjD,MAAM,sBAAsB,aAAa,CAAC,QAAU,MAAM,MAAM,CAAC;AACnE"}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///home/joet/Downloads/joetemulator/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useLayoutEffect, useMemo, useRef } from 'react';\nimport { loadGame } from '@/lib/emulator';\nimport { saveGameFile, getGameFile } from '@/lib/storage';\nimport { SYSTEM_PICKER, FILE_EXTENSIONS, getSystemNameByCore } from '@/lib/constants';\nimport { Gamepad2, Info, Palette, Menu, X, Settings, Trash2 } from 'lucide-react';\n\ninterface Game {\n  id: number;\n  title: string;\n  genre: string;\n  filePath?: string;\n  fileName?: string;\n  fileData?: string; // Legacy: Base64 encoded file data (for migration)\n  core?: string; // Emulator core/system\n  coverArt?: string; // URL or data URL for cover art\n  coverArtFit?: 'cover' | 'contain'; // 'cover' = zoom to fill, 'contain' = shrink to fit\n}\n\nconst THEMES = {\n  dark: {\n    highlight: '#cccccc',\n    darkBg: '#0f0f0f',\n    midDark: '#1e1e1e',\n    softLight: '#f5f5f5',\n    sidebarHover: '#333333',\n    playGreen: '#00ff7f',\n    gradientFrom: '#00ff7f',\n    gradientTo: '#00cc66',\n  },\n  blue: {\n    highlight: '#bfdbfe',\n    darkBg: '#0c1220',\n    midDark: '#1e293b',\n    softLight: '#eff6ff',\n    sidebarHover: '#334155',\n    playGreen: '#60a5fa',\n    gradientFrom: '#60a5fa',\n    gradientTo: '#3b82f6',\n  },\n  purple: {\n    highlight: '#ddd6fe',\n    darkBg: '#1a0f2e',\n    midDark: '#2d1b3d',\n    softLight: '#faf5ff',\n    sidebarHover: '#3f2d52',\n    playGreen: '#c084fc',\n    gradientFrom: '#c084fc',\n    gradientTo: '#a855f7',\n  },\n  green: {\n    highlight: '#bbf7d0',\n    darkBg: '#0f1a0f',\n    midDark: '#1e2e1e',\n    softLight: '#f0fdf4',\n    sidebarHover: '#2d3e2d',\n    playGreen: '#4ade80',\n    gradientFrom: '#4ade80',\n    gradientTo: '#22c55e',\n  },\n  orange: {\n    highlight: '#fde68a',\n    darkBg: '#1f1206',\n    midDark: '#2e1a0a',\n    softLight: '#fffbeb',\n    sidebarHover: '#3d2814',\n    playGreen: '#fbbf24',\n    gradientFrom: '#fbbf24',\n    gradientTo: '#f59e0b',\n  },\n  red: {\n    highlight: '#fecaca',\n    darkBg: '#1f0a0a',\n    midDark: '#2e1414',\n    softLight: '#fef2f2',\n    sidebarHover: '#3d1f1f',\n    playGreen: '#f87171',\n    gradientFrom: '#f87171',\n    gradientTo: '#ef4444',\n  },\n  pink: {\n    highlight: '#fbcfe8',\n    darkBg: '#1f0f1a',\n    midDark: '#2e1420',\n    softLight: '#fdf2f8',\n    sidebarHover: '#3d1f2d',\n    playGreen: '#f472b6',\n    gradientFrom: '#f472b6',\n    gradientTo: '#ec4899',\n  },\n  cyan: {\n    highlight: '#a7f3d0',\n    darkBg: '#0a1a1f',\n    midDark: '#142a2e',\n    softLight: '#f0fdfa',\n    sidebarHover: '#1f3d42',\n    playGreen: '#22d3ee',\n    gradientFrom: '#22d3ee',\n    gradientTo: '#06b6d4',\n  },\n  yellow: {\n    highlight: '#fef08a',\n    darkBg: '#1f1a0a',\n    midDark: '#2e2814',\n    softLight: '#fefce8',\n    sidebarHover: '#3d3d1f',\n    playGreen: '#eab308',\n    gradientFrom: '#eab308',\n    gradientTo: '#ca8a04',\n  },\n  teal: {\n    highlight: '#99f6e4',\n    darkBg: '#0a1a1a',\n    midDark: '#142a2a',\n    softLight: '#f0fdfa',\n    sidebarHover: '#1f3d3d',\n    playGreen: '#2dd4bf',\n    gradientFrom: '#2dd4bf',\n    gradientTo: '#14b8a6',\n  },\n  indigo: {\n    highlight: '#c7d2fe',\n    darkBg: '#0f0f1f',\n    midDark: '#1e1e2e',\n    softLight: '#eef2ff',\n    sidebarHover: '#2d2d3e',\n    playGreen: '#818cf8',\n    gradientFrom: '#818cf8',\n    gradientTo: '#6366f1',\n  },\n};\n\ntype ThemeConfig = typeof THEMES[keyof typeof THEMES];\n\n// Helper function to get gradient background\nconst getGradientStyle = (from: string, to: string) => ({\n  background: `linear-gradient(135deg, ${from} 0%, ${to} 100%)`,\n});\n\n// Get system display name from core\nconst getSystemDisplayName = (core?: string): string => {\n  if (!core) return 'Unknown';\n\n  const systemMap: Record<string, string> = {\n    'nes': 'NES',\n    'gb': 'GB',\n    'gbc': 'GBC',\n    'snes': 'SNES',\n    'vb': 'VB',\n    'n64': 'N64',\n    'gba': 'GBA',\n    'nds': 'DS',\n    'segaMS': 'MS',\n    'segaMD': 'MD',\n    'segaGG': 'GG',\n    'segaCD': 'CD',\n    'sega32x': '32X',\n    'segaSaturn': 'Saturn',\n    'psx': 'PS1',\n    'psp': 'PSP',\n    'atari2600': '2600',\n    'atari5200': '5200',\n    'atari7800': '7800',\n    'lynx': 'Lynx',\n    'jaguar': 'Jaguar',\n    'opera': '3DO',\n    'arcade': 'Arcade',\n    'mame2003_plus': 'MAME',\n    'dosbox_pure': 'DOS',\n    'vice_xpet': 'PET',\n    'vice_xvic': 'VIC20',\n    'amiga': 'Amiga',\n    'vice_x64': 'C64',\n    'vice_x128': 'C128',\n    'vice_xplus4': 'Plus/4',\n    'coleco': 'Coleco',\n    'pce': 'TG16',\n    'pcfx': 'PC-FX',\n    'ngp': 'NGP',\n    'ws': 'WS',\n  };\n\n  return systemMap[core] || core.toUpperCase();\n};\n\nfunction GameCard({ game, onPlay, onEdit, onDelete, onSelect, isSelected, isDeleteMode, onEnterDeleteMode, onCoverArtClick, colors }: { game: Game; onPlay: (game: Game) => void; onEdit: (game: Game) => void; onDelete: (game: Game) => void; onSelect: (gameId: number) => void; isSelected: boolean; isDeleteMode: boolean; onEnterDeleteMode: () => void; onCoverArtClick?: (game: Game) => void; colors: typeof THEMES.dark }) {\n  const baseCoverClass = \"h-full flex items-center justify-center bg-cover bg-center bg-no-repeat relative\";\n  const cardClass = `group relative overflow-hidden w-64 h-80 rounded-xl transition-all duration-300 ease-in-out hover:shadow-lg hover:z-10 border animate-border-breathe ${isDeleteMode ? 'animate-shake' : 'hover:scale-[1.02]'}`;\n  const overlayClass = \"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent backdrop-brightness-75 flex flex-col justify-end p-5 opacity-0 group-hover:opacity-100 transition-opacity duration-300\";\n  const contentClass = \"transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-400 ease-out\";\n  const buttonClass = \"w-full font-bold py-2.5 px-4 rounded-lg transition-all text-sm hover:shadow-md active:scale-[0.98]\";\n\n  return (\n    <div\n      className={cardClass}\n      style={{\n        backgroundColor: isDeleteMode && isSelected ? '#ef4444' : colors.midDark,\n        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.3)',\n        cursor: isDeleteMode ? 'pointer' : 'default',\n      }}\n      onClick={() => isDeleteMode && onSelect(game.id)}\n    >\n      {isDeleteMode && isSelected && (\n        <div className=\"absolute inset-0 bg-red-500/40 z-20 flex items-center justify-center rounded-xl\">\n          <Trash2 className=\"w-16 h-16 text-white drop-shadow-lg\" />\n        </div>\n      )}\n      {isDeleteMode && (\n        <div className=\"absolute bottom-3 right-3 z-20\">\n          <div\n            className=\"w-6 h-6 rounded-full border-2 border-white flex items-center justify-center transition-all\"\n            style={{ backgroundColor: isSelected ? 'white' : 'transparent' }}\n          >\n            {isSelected && (\n              <svg className=\"w-4 h-4 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n              </svg>\n            )}\n          </div>\n        </div>\n      )}\n      <div\n        className={baseCoverClass}\n        style={game.coverArt ? {\n          backgroundImage: `url(${game.coverArt})`,\n          backgroundColor: 'transparent',\n          backgroundSize: game.coverArtFit || 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        } : {\n          ...getGradientStyle(colors.gradientFrom, colors.gradientTo)\n        }}\n      >\n        {!game.coverArt && (\n          <div className=\"flex items-center justify-center\" style={{ color: colors.darkBg }}>\n            <span className=\"text-4xl font-bold tracking-wide\" style={{ textShadow: '0 2px 4px rgba(0,0,0,0.2)' }}>\n              {getSystemDisplayName(game.core)}\n            </span>\n            {onCoverArtClick && !isDeleteMode && (\n              <button\n                onClick={(e) => { e.stopPropagation(); onCoverArtClick(game); }}\n                className=\"absolute inset-0\"\n                aria-label=\"Add cover art\"\n                title=\"Add cover art\"\n              >\n                <span className=\"sr-only\">Add cover art</span>\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n      {!isDeleteMode && (\n        <div className={overlayClass}>\n          <div className={contentClass}>\n            <h3 className=\"text-xl font-bold truncate mb-1.5\" style={{ color: colors.softLight, textShadow: '0 2px 4px rgba(0,0,0,0.5)' }}>{game.title}</h3>\n            <p className=\"text-sm mb-3\" style={{ color: colors.highlight }}>\n              {game.genre}\n            </p>\n            <div className=\"flex gap-2.5 items-stretch mt-3\">\n              <button\n                className={buttonClass + \" flex-1\"}\n                style={{ ...getGradientStyle(colors.gradientFrom, colors.gradientTo), color: colors.darkBg }}\n                onClick={(e) => { e.stopPropagation(); onPlay(game); }}\n              >\n                PLAY\n              </button>\n              <button\n                className=\"px-3 py-2.5 rounded-lg transition-all hover:shadow-md active:scale-95 flex items-center justify-center\"\n                style={{ backgroundColor: colors.highlight, color: colors.darkBg }}\n                onClick={(e) => { e.stopPropagation(); onEdit(game); }}\n                title=\"Edit System\"\n              >\n                <Settings className=\"w-5 h-5\" />\n              </button>\n              <button\n                className=\"px-3 py-2.5 rounded-lg transition-all hover:shadow-md active:scale-95 flex items-center justify-center select-none\"\n                style={{ backgroundColor: '#ef4444', color: colors.softLight }}\n                onMouseDown={(e) => {\n                  e.stopPropagation();\n                  const timeout = setTimeout(() => {\n                    onEnterDeleteMode();\n                  }, 500);\n                  const cleanup = () => clearTimeout(timeout);\n                  e.currentTarget.addEventListener('mouseup', cleanup, { once: true });\n                  e.currentTarget.addEventListener('mouseleave', cleanup, { once: true });\n                }}\n                onTouchStart={(e) => {\n                  e.stopPropagation();\n                  const timeout = setTimeout(() => {\n                    onEnterDeleteMode();\n                  }, 500);\n                  const cleanup = () => clearTimeout(timeout);\n                  e.currentTarget.addEventListener('touchend', cleanup, { once: true });\n                }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onDelete(game);\n                }}\n                title=\"Delete\"\n              >\n                <Trash2 className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\nexport default function Home() {\n  const [activeView, setActiveView] = useState<'library' | 'themes' | 'about'>('library');\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [currentTime, setCurrentTime] = useState<string>('');\n  const [isMounted, setIsMounted] = useState(false);\n  const [games, setGames] = useState<Game[]>([]);\n  const [editingGame, setEditingGame] = useState<Game | null>(null);\n  const [systemPickerOpen, setSystemPickerOpen] = useState(false);\n  const [systemPickerClosing, setSystemPickerClosing] = useState(false);\n  const [pendingGame, setPendingGame] = useState<Partial<Game> | null>(null);\n  const [pendingFiles, setPendingFiles] = useState<Array<{ file: File; index: number }>>([]);\n  const [systemSearchQuery, setSystemSearchQuery] = useState('');\n  const [duplicateMessage, setDuplicateMessage] = useState<string | null>(null);\n  const [showDuplicateMessage, setShowDuplicateMessage] = useState(false);\n  const [isLoadingGames, setIsLoadingGames] = useState(true);\n  const [selectedTheme, setSelectedTheme] = useState<string>('dark');\n  const [searchFocused, setSearchFocused] = useState(false);\n  const [coverArtFit, setCoverArtFit] = useState<'cover' | 'contain'>('cover');\n  const [sortBy, setSortBy] = useState<'title' | 'system'>('title');\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\n  const [isHydrated, setIsHydrated] = useState(false);\n  const [selectedGameIds, setSelectedGameIds] = useState<Set<number>>(new Set());\n  const [isDeleteMode, setIsDeleteMode] = useState(false);\n  const [deletingGameIds, setDeletingGameIds] = useState<Set<number>>(new Set());\n  const [shouldAnimateEntries, setShouldAnimateEntries] = useState(true);\n\n  // Sync theme from localStorage immediately before first render to prevent flash\n  useLayoutEffect(() => {\n    if (typeof window === 'undefined') return;\n    const savedTheme = localStorage.getItem('theme') || 'dark';\n    setSelectedTheme(savedTheme);\n    setIsHydrated(true);\n  }, []);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem('theme', selectedTheme);\n  }, [selectedTheme]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    // Load sort preferences from localStorage\n    const savedSortBy = (localStorage.getItem('sortBy') as 'title' | 'system') || 'title';\n    const savedSortOrder = (localStorage.getItem('sortOrder') as 'asc' | 'desc') || 'asc';\n    setSortBy(savedSortBy);\n    setSortOrder(savedSortOrder);\n\n    const updateTime = () => {\n      setCurrentTime(new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }));\n    };\n    updateTime();\n    setIsMounted(true);\n    const interval = setInterval(updateTime, 60000);\n\n    // Load games from localStorage on mount\n    const loadGames = async () => {\n      setIsLoadingGames(true);\n      const savedGames = localStorage.getItem('games');\n      if (savedGames) {\n        try {\n          const loadedGames: Game[] = JSON.parse(savedGames);\n\n          // Migrate old games with fileData to IndexedDB\n          let migratedGames = loadedGames;\n          for (const game of loadedGames) {\n            if (game.fileData) {\n              migratedGames = await migrateGameToIndexedDB(game, migratedGames);\n            }\n          }\n\n          // Migrate games: update genre and coverArtFit\n          migratedGames = migratedGames.map(game => {\n            let updated = { ...game };\n            if (game.genre === 'ROM' && game.core) {\n              const systemName = getSystemNameByCore(game.core);\n              updated.genre = systemName;\n            }\n            if (game.coverArt && !game.coverArtFit) {\n              updated.coverArtFit = 'cover';\n            }\n            return updated;\n          });\n\n          if (migratedGames !== loadedGames) {\n            // Update localStorage with migrated games (without fileData)\n            localStorage.setItem('games', JSON.stringify(migratedGames));\n          }\n\n          setGames(migratedGames);\n        } catch (e) {\n          console.error('Failed to load games from storage', e);\n        }\n      }\n      setIsLoadingGames(false);\n    };\n\n    loadGames();\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Save sort preferences to localStorage when they change\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem('sortBy', sortBy);\n  }, [sortBy]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem('sortOrder', sortOrder);\n  }, [sortOrder]);\n\n  // Close system picker with fade-out animation\n  const closeSystemPicker = () => {\n    setSystemPickerClosing(true);\n    setTimeout(() => {\n      setSystemPickerOpen(false);\n      setSystemPickerClosing(false);\n      setPendingFiles([]);\n      setPendingGame(null);\n      setEditingGame(null);\n      setSystemSearchQuery('');\n    }, 200); // Match the fade-out animation duration\n  };\n\n  const handleSystemPickerDone = async () => {\n    if (editingGame) {\n      closeSystemPicker();\n      return;\n    }\n\n    if (pendingFiles.length === 1 && pendingGame?.core) {\n      try {\n        const { file } = pendingFiles[0];\n        const gameId = pendingGame.id ?? Date.now();\n        const fileName = pendingGame.fileName || file.name;\n        const derivedTitle = pendingGame.title || file.name.replace(/\\.[^/.]+$/, '');\n        const genre = pendingGame.genre || getSystemNameByCore(pendingGame.core) || 'Unknown System';\n\n        const isDuplicate = games.some(g => g.fileName === file.name);\n        if (isDuplicate) {\n          setDuplicateMessage(`\"${file.name}\" is already in your library`);\n          setShowDuplicateMessage(true);\n          closeSystemPicker();\n          setTimeout(() => setShowDuplicateMessage(false), 2500);\n          setTimeout(() => setDuplicateMessage(null), 3000);\n          return;\n        }\n\n        await saveGameFile(gameId, file);\n\n        const newGame: Game = {\n          id: gameId,\n          title: derivedTitle,\n          genre,\n          filePath: pendingGame.filePath || file.name,\n          fileName,\n          core: pendingGame.core,\n          coverArt: pendingGame.coverArt,\n          coverArtFit: pendingGame.coverArt ? (pendingGame.coverArtFit || coverArtFit) : undefined,\n        };\n\n        const updatedGames = [...games, newGame];\n        setGames(updatedGames);\n        localStorage.setItem('games', JSON.stringify(updatedGames));\n      } catch (error) {\n        console.error('Error finalizing game addition:', error);\n      }\n    }\n\n    closeSystemPicker();\n  };\n\n  // Migrate old games with fileData to IndexedDB\n  const migrateGameToIndexedDB = async (game: Game, allGames: Game[]): Promise<Game[]> => {\n    if (!game.fileData || !game.fileData.startsWith('data:')) {\n      // Already migrated or invalid\n      return allGames;\n    }\n\n    try {\n      // Convert base64 back to File\n      const response = await fetch(game.fileData);\n      const blob = await response.blob();\n      const file = new File([blob], game.fileName || game.title, { type: 'application/octet-stream' });\n      await saveGameFile(game.id, file);\n\n      // Remove fileData from game object\n      const { fileData, ...gameWithoutData } = game;\n      return allGames.map(g => g.id === game.id ? gameWithoutData : g);\n    } catch (error) {\n      console.error('Error migrating game to IndexedDB:', error);\n      return allGames;\n    }\n  };\n\n  const getSystemFromExtension = (extension: string): string | null => {\n    return FILE_EXTENSIONS[extension.toLowerCase()] || null;\n  };\n\n  const processGameFile = async (file: File, index: number, selectedCore?: string, currentGamesList?: Game[]): Promise<Game[]> => {\n    const fileName = file.name;\n    const nameWithoutExt = fileName.replace(/\\.[^/.]+$/, '');\n    const fileExtension = fileName.split(\".\").pop()?.toLowerCase() || \"\";\n\n    // Check for duplicates\n    const gamesListToCheck = currentGamesList || games;\n    const isDuplicate = gamesListToCheck.some(g => g.fileName === fileName || g.filePath === file.name);\n    if (isDuplicate) {\n      setDuplicateMessage(`\"${fileName}\" is already in your library`);\n      setShowDuplicateMessage(true);\n      setTimeout(() => setShowDuplicateMessage(false), 2500);\n      setTimeout(() => setDuplicateMessage(null), 3000);\n      return gamesListToCheck;\n    }\n\n    const detectedCore = selectedCore || getSystemFromExtension(fileExtension);\n    const gameId = Date.now() + index;\n\n    await saveGameFile(gameId, file);\n\n    // Get system name for genre display\n    const systemName = detectedCore\n      ? getSystemNameByCore(detectedCore)\n      : 'Unknown System';\n\n    const gameData: Partial<Game> = {\n      id: gameId,\n      title: nameWithoutExt,\n      genre: systemName,\n      filePath: file.name,\n      fileName: fileName,\n      core: detectedCore || undefined,\n    };\n\n    if (detectedCore) {\n      const newGame = gameData as Game;\n      const updatedGames = [...gamesListToCheck, newGame];\n      setGames(updatedGames);\n      localStorage.setItem('games', JSON.stringify(updatedGames));\n      return updatedGames;\n    }\n\n    return gamesListToCheck;\n  };\n\n  const selectSystem = async (core: string) => {\n    const systemName = getSystemNameByCore(core);\n\n    // If adding multiple files from file picker\n    if (pendingFiles.length > 1) {\n      let currentGames = games;\n      for (const { file, index } of pendingFiles) {\n        currentGames = await processGameFile(file, index, core, currentGames);\n      }\n      setPendingFiles([]);\n      closeSystemPicker();\n      return;\n    }\n\n    // If adding a single file from file picker without detected system\n    if (editingGame) {\n      // When editing, update the selection and keep modal open\n      const updatedGames = games.map(g => g.id === editingGame.id ? { ...g, core: core, genre: systemName } : g);\n      setGames(updatedGames);\n      localStorage.setItem('games', JSON.stringify(updatedGames));\n      // Update the editing game and pending game to reflect the new selection\n      setEditingGame({ ...editingGame, core: core, genre: systemName });\n      if (pendingGame) {\n        setPendingGame({ ...pendingGame, core: core, genre: systemName });\n      }\n      // Don't close the modal - let user close it manually\n    } else if (pendingGame) {\n      setPendingGame({\n        ...pendingGame,\n        core: core,\n        genre: systemName\n      });\n    }\n  };\n\n  const applyCoverArt = async (coverArt: string | null) => {\n    if (!coverArt) return;\n\n    if (editingGame) {\n      const updatedGames = games.map(g =>\n        g.id === editingGame.id ? { ...g, coverArt: coverArt, coverArtFit: coverArtFit } : g\n      );\n      setGames(updatedGames);\n      localStorage.setItem('games', JSON.stringify(updatedGames));\n      setEditingGame({ ...editingGame, coverArt: coverArt, coverArtFit: coverArtFit });\n      if (pendingGame && pendingGame.id === editingGame.id) {\n        setPendingGame({ ...pendingGame, coverArt: coverArt, coverArtFit: coverArtFit });\n      }\n    } else if (pendingGame) {\n      setPendingGame({ ...pendingGame, coverArt: coverArt, coverArtFit: coverArtFit });\n    }\n  };\n\n  const updateCoverArtFit = (newFit: 'cover' | 'contain') => {\n    if (editingGame && (editingGame.coverArt || pendingGame?.coverArt)) {\n      const updatedGames = games.map(g =>\n        g.id === editingGame.id ? { ...g, coverArtFit: newFit } : g\n      );\n      setGames(updatedGames);\n      localStorage.setItem('games', JSON.stringify(updatedGames));\n      setEditingGame({ ...editingGame, coverArtFit: newFit });\n      if (pendingGame && pendingGame.id === editingGame.id) {\n        setPendingGame({ ...pendingGame, coverArtFit: newFit });\n      }\n    } else if (pendingGame && pendingGame.coverArt) {\n      setPendingGame({ ...pendingGame, coverArtFit: newFit });\n    }\n  };\n\n  const handleCoverArtFileUpload = async (file: File): Promise<void> => {\n    try {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const dataUrl = e.target?.result as string;\n        applyCoverArt(dataUrl);\n      };\n      reader.onerror = () => {\n        console.error('Error reading file');\n      };\n      reader.readAsDataURL(file);\n    } catch (error) {\n      console.error('Error uploading cover art:', error);\n    }\n  };\n\n  const removeCoverArt = () => {\n    if (editingGame) {\n      const updatedGames = games.map(g =>\n        g.id === editingGame.id ? { ...g, coverArt: undefined } : g\n      );\n      setGames(updatedGames);\n      localStorage.setItem('games', JSON.stringify(updatedGames));\n      const updatedEditingGame = { ...editingGame, coverArt: undefined };\n      setEditingGame(updatedEditingGame);\n      // Also update pendingGame if it exists\n      if (pendingGame && pendingGame.id === editingGame.id) {\n        setPendingGame(updatedEditingGame);\n      }\n    } else if (pendingGame) {\n      setPendingGame({ ...pendingGame, coverArt: undefined });\n    }\n  };\n\n  const handleFileSelect = async () => {\n    try {\n      let files: File[] = [];\n\n      if ('showOpenFilePicker' in window) {\n        const fileHandles = await (window as any).showOpenFilePicker({\n          multiple: true\n        });\n        files = await Promise.all(fileHandles.map((fh: any) => fh.getFile()));\n      } else {\n        // Fallback for browsers without File System Access API\n        files = await new Promise<File[]>((resolve) => {\n          const input = document.createElement('input');\n          input.type = 'file';\n          input.multiple = true;\n          input.onchange = (e: any) => {\n            resolve(Array.from(e.target.files || []) as File[]);\n          };\n          input.click();\n        });\n      }\n\n      // First, process files with detected systems\n      const filesNeedingSystem: Array<{ file: File; index: number }> = [];\n      let currentGames = games;\n\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        const fileExtension = file.name.split(\".\").pop()?.toLowerCase() || \"\";\n        const detectedCore = getSystemFromExtension(fileExtension);\n\n        if (detectedCore) {\n          // Auto-add files with detected systems\n          currentGames = await processGameFile(file, i, detectedCore, currentGames);\n        } else {\n          // Collect files that need system selection\n          filesNeedingSystem.push({ file, index: i });\n        }\n      }\n\n      // Filter out duplicates\n      const filteredFilesNeedingSystem = filesNeedingSystem.filter(({ file }) => {\n        const fileName = file.name;\n        return !currentGames.some(g => g.fileName === fileName || g.filePath === file.name);\n      });\n\n      // If there are files without detected systems, show system picker\n      if (filteredFilesNeedingSystem.length > 0) {\n        setPendingFiles(filteredFilesNeedingSystem);\n        // Only set pendingGame if it's a single file (for the UI to show cover art section)\n        if (filteredFilesNeedingSystem.length === 1) {\n          const fileName = filteredFilesNeedingSystem[0].file.name;\n          const nameWithoutExt = fileName.replace(/\\.[^/.]+$/, '');\n          setPendingGame({\n            id: Date.now(),\n            title: nameWithoutExt,\n            genre: 'Unknown',\n            filePath: fileName,\n            fileName: fileName,\n          });\n        } else {\n          setPendingGame(null);\n        }\n        setCoverArtFit('cover');\n        setSystemPickerOpen(true);\n      } else if (filesNeedingSystem.length > 0) {\n        if (filesNeedingSystem.length === 1) {\n          setDuplicateMessage(`The file \"${filesNeedingSystem[0].file.name}\" is already in your library`);\n        } else {\n          setDuplicateMessage(`All ${filesNeedingSystem.length} selected files are already in your library`);\n        }\n        setShowDuplicateMessage(true);\n        setTimeout(() => setShowDuplicateMessage(false), 2000);\n        setTimeout(() => setDuplicateMessage(null), 2500);\n      }\n    } catch (err: any) {\n      if (err.name !== 'AbortError') {\n        console.error('Error selecting files:', err);\n      }\n    }\n  };\n\n  const handleEditGame = (game: Game) => {\n    setEditingGame(game);\n    setPendingGame({ ...game });\n    setCoverArtFit(game.coverArtFit || 'cover');\n    setSystemPickerOpen(true);\n  };\n\n  const handleDeleteGame = async (game: Game) => {\n    if (confirm(`Are you sure you want to delete \"${game.title}\"?`)) {\n      try {\n        const { deleteGameFile } = await import('@/lib/storage');\n\n        // Trigger fade-out animation for this game\n        setDeletingGameIds(prev => {\n          const next = new Set(prev);\n          next.add(game.id);\n          return next;\n        });\n\n        await new Promise(resolve => setTimeout(resolve, 400));\n\n        await deleteGameFile(game.id);\n\n        const updatedGames = games.filter(g => g.id !== game.id);\n        setGames(updatedGames);\n        localStorage.setItem('games', JSON.stringify(updatedGames));\n\n        setDeletingGameIds(prev => {\n          const next = new Set(prev);\n          next.delete(game.id);\n          return next;\n        });\n      } catch (error) {\n        console.error('Error deleting game:', error);\n      }\n    }\n  };\n\n  const toggleGameSelection = (gameId: number) => {\n    const newSelected = new Set(selectedGameIds);\n    if (newSelected.has(gameId)) {\n      newSelected.delete(gameId);\n    } else {\n      newSelected.add(gameId);\n    }\n    setSelectedGameIds(newSelected);\n  };\n\n  const toggleSelectAll = () => {\n    if (selectedGameIds.size === games.length) {\n      setSelectedGameIds(new Set());\n    } else {\n      setSelectedGameIds(new Set(games.map(g => g.id)));\n    }\n  };\n\n  const handleMassDelete = async () => {\n    if (selectedGameIds.size === 0) return;\n\n    if (confirm(`Are you sure you want to delete ${selectedGameIds.size} game(s)? This action cannot be undone.`)) {\n      try {\n        const { deleteGameFile } = await import('@/lib/storage');\n\n        // Trigger fade-out animation\n        setDeletingGameIds(new Set(selectedGameIds));\n\n        // Wait for animation to complete\n        await new Promise(resolve => setTimeout(resolve, 400));\n\n        // Delete from IndexedDB\n        for (const gameId of selectedGameIds) {\n          await deleteGameFile(gameId);\n        }\n\n        // Remove from state and localStorage\n        const updatedGames = games.filter(g => !selectedGameIds.has(g.id));\n        setGames(updatedGames);\n        localStorage.setItem('games', JSON.stringify(updatedGames));\n        setSelectedGameIds(new Set());\n        setDeletingGameIds(new Set());\n        setIsDeleteMode(false);\n      } catch (error) {\n        console.error('Error deleting games:', error);\n      }\n    }\n  };\n\n  const deleteButtonRef = useRef<HTMLButtonElement>(null);\n  const deleteTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const isPressingRef = useRef(false);\n\n  const handleDeleteButtonMouseDown = () => {\n    isPressingRef.current = true;\n    deleteTimeoutRef.current = setTimeout(() => {\n      if (isPressingRef.current) {\n        setIsDeleteMode(true);\n      }\n    }, 500);\n  };\n\n  const handleDeleteButtonMouseUp = () => {\n    isPressingRef.current = false;\n    if (deleteTimeoutRef.current) {\n      clearTimeout(deleteTimeoutRef.current);\n      deleteTimeoutRef.current = null;\n    }\n  };\n\n  const exitDeleteMode = () => {\n    setIsDeleteMode(false);\n    setSelectedGameIds(new Set());\n  };\n\n  const handlePlayClick = async (game: Game) => {\n    try {\n      let file: File | null = null;\n\n      // Try to get file from IndexedDB first\n      file = await getGameFile(game.id);\n\n      // Fallback to legacy fileData if IndexedDB doesn't have it\n      if (!file && game.fileData) {\n        const response = await fetch(game.fileData);\n        const blob = await response.blob();\n        file = new File([blob], game.fileName || game.title, { type: 'application/octet-stream' });\n        // Save to IndexedDB for next time\n        await saveGameFile(game.id, file);\n      }\n\n      if (file) {\n        await loadGame(file, game.core);\n      } else {\n        console.error('Game file not found');\n      }\n    } catch (error) {\n      console.error('Error loading game:', error);\n    }\n  };\n\n  const handleNavClick = (viewName: 'library' | 'themes' | 'about') => {\n    setActiveView(viewName);\n    setIsSidebarOpen(false);\n  };\n\n  const getSidebarButtonClass = (view: 'library' | 'themes' | 'about') => {\n    const baseClass = \"sidebar-item block p-3 mb-2 rounded-lg transition-all flex items-center border-l-4 hover:translate-x-1\";\n    const isActive = activeView === view;\n    return `${baseClass} ${isActive ? 'border-l-4' : 'border-transparent'}`;\n  };\n\n  const sidebarClass = isSidebarOpen ? \"translate-x-0\" : \"-translate-x-full\";\n  const sidebarFullClass = `w-64 p-6 flex flex-col justify-start shadow-xl fixed left-0 top-0 bottom-0 z-50 transition-all duration-300 ease-in-out ${sidebarClass}`;\n\n  const currentColors = THEMES[selectedTheme as keyof typeof THEMES] || THEMES.dark;\n\n  const handleThemeChange = (themeName: string) => {\n    setSelectedTheme(themeName);\n  };\n\n  // Get system category for a game based on the core\n  const getSystemCategory = (core?: string): string => {\n    if (!core) return 'Other';\n\n    // Check which category the core belongs to\n    for (const [category, systems] of Object.entries(SYSTEM_PICKER)) {\n      if (Object.values(systems).includes(core)) {\n        return category;\n      }\n    }\n    return 'Other';\n  };\n\n  // Sort games\n  const sortedGames = useMemo(() => {\n    const sorted = [...games];\n    sorted.sort((a, b) => {\n      let comparison = 0;\n      if (sortBy === 'title') {\n        comparison = a.title.localeCompare(b.title);\n      } else if (sortBy === 'system') {\n        comparison = a.genre.localeCompare(b.genre);\n      }\n      return sortOrder === 'asc' ? comparison : -comparison;\n    });\n    return sorted;\n  }, [games, sortBy, sortOrder]);\n\n  // Group games by system category when sorting by system\n  const groupedGames = useMemo(() => {\n    if (sortBy !== 'system') {\n      return null;\n    }\n\n    const categoryOrder = ['Nintendo', 'Sega', 'Sony', 'Atari', 'Other'];\n    const groups: Record<string, Game[]> = {\n      'Nintendo': [],\n      'Sega': [],\n      'Sony': [],\n      'Atari': [],\n      'Other': []\n    };\n\n    sortedGames.forEach(game => {\n      const category = getSystemCategory(game.core);\n      groups[category].push(game);\n    });\n\n    // Sort categories based on sort order\n    if (sortOrder === 'desc') {\n      categoryOrder.reverse();\n    }\n\n    // Create new object with sorted category order\n    const sortedGroups: Record<string, Game[]> = {};\n    categoryOrder.forEach(category => {\n      if (groups[category].length > 0) {\n        sortedGroups[category] = groups[category];\n      }\n    });\n\n    return sortedGroups;\n  }, [sortedGames, sortBy, sortOrder]);\n\n  const renderContent = () => {\n    if (activeView === 'themes') {\n      return (\n        <div>\n          <h2 className=\"text-2xl font-bold mb-6\" style={{ color: currentColors.softLight }}>\n            Select Theme\n          </h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {Object.entries(THEMES).map(([themeName, themeColors]) => (\n              <button\n                key={themeName}\n                onClick={() => handleThemeChange(themeName)}\n                className=\"p-6 rounded-xl transition-all border-2 relative overflow-hidden\"\n                style={{\n                  backgroundColor: themeColors.midDark,\n                  borderColor: selectedTheme === themeName ? themeColors.playGreen : themeColors.highlight + '40',\n                  boxShadow: selectedTheme === themeName ? `0 2px 8px ${themeColors.playGreen}30` : '0 2px 4px rgba(0, 0, 0, 0.2)',\n                }}\n              >\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-xl font-bold capitalize\" style={{ color: themeColors.softLight }}>\n                    {themeName}\n                  </h3>\n                  {selectedTheme === themeName && (\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\" style={{ color: themeColors.playGreen }}>\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                  )}\n                </div>\n                <div className=\"flex gap-2\">\n                  <div className=\"flex-1 h-12 rounded-lg\" style={{ backgroundColor: themeColors.darkBg }}></div>\n                  <div className=\"flex-1 h-12 rounded-lg\" style={{ backgroundColor: themeColors.midDark }}></div>\n                  <div className=\"flex-1 h-12 rounded-lg\" style={{ backgroundColor: themeColors.playGreen }}></div>\n                  <div className=\"flex-1 h-12 rounded-lg\" style={{ backgroundColor: themeColors.highlight }}></div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n    if (activeView === 'about') {\n      return (\n        <div>\n          <h2 className=\"text-2xl font-bold mb-4\" style={{ color: currentColors.softLight }}>About Joe T Emulator</h2>\n          <p className=\"text-sm mb-4\" style={{ color: currentColors.highlight }}>\n            Joe T Emulator is an open-source, web-based emulator that allows you to play classic games directly in your browser. It supports a variety of systems and offers a customizable experience with themes and cover art.\n          </p>\n          <div className=\"p-4 rounded-xl\" style={{ backgroundColor: currentColors.midDark, color: currentColors.softLight }}>\n            <p className=\"text-sm\">Version: local</p>\n            <p className=\"text-sm\">Built with React + Next.js</p>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-xl font-semibold\" style={{ color: currentColors.highlight }}>\n            Games ({games.length})\n          </h2>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex items-center gap-2 px-4 py-2 rounded-lg\" style={{ backgroundColor: currentColors.midDark }}>\n              <label className=\"text-sm font-medium\" style={{ color: currentColors.highlight }}>Sort by:</label>\n              <div className=\"flex gap-1\">\n                {(['title', 'system'] as const).map((option) => (\n                  <button\n                    key={option}\n                    onClick={() => setSortBy(option)}\n                    className=\"px-3 py-1.5 rounded-lg text-sm font-medium transition-all active:scale-95\"\n                    style={{\n                      backgroundColor: sortBy === option ? currentColors.highlight : currentColors.darkBg,\n                      color: sortBy === option ? currentColors.darkBg : currentColors.softLight,\n                    }}\n                  >\n                    {option === 'title' ? 'Title' : 'System'}\n                  </button>\n                ))}\n              </div>\n              <button\n                onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\n                className=\"px-3 py-1.5 rounded-lg text-sm font-semibold transition-all hover:shadow-md active:scale-95 flex items-center justify-center\"\n                style={{\n                  backgroundColor: currentColors.highlight,\n                  color: currentColors.darkBg,\n                }}\n              >\n                {sortOrder === 'asc' ? '' : ''}\n              </button>\n            </div>\n            {isDeleteMode ? (\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={handleMassDelete}\n                  disabled={selectedGameIds.size === 0}\n                  className=\"px-4 py-2.5 rounded-lg font-semibold transition-all hover:shadow-md active:scale-95\"\n                  style={{\n                    backgroundColor: '#ef4444',\n                    color: currentColors.softLight,\n                    opacity: selectedGameIds.size === 0 ? 0.5 : 1\n                  }}\n                >\n                  Delete Selected ({selectedGameIds.size})\n                </button>\n                <button\n                  onClick={exitDeleteMode}\n                  className=\"px-5 py-2.5 rounded-lg font-semibold transition-all active:scale-95\"\n                  style={{ backgroundColor: currentColors.highlight, color: currentColors.darkBg }}\n                >\n                  Cancel\n                </button>\n              </div>\n            ) : (\n              <button\n                onClick={handleFileSelect}\n                className=\"px-8 py-3.5 rounded-lg font-semibold transition-all hover:shadow-md active:scale-95\"\n                style={{ ...getGradientStyle(currentColors.gradientFrom, currentColors.gradientTo), color: currentColors.darkBg }}\n              >\n                Add Game\n              </button>\n            )}\n          </div>\n        </div>\n        {isLoadingGames ? (\n          <div className=\"text-center py-16\">\n            <p className=\"text-lg\" style={{ color: currentColors.highlight }}>Loading games...</p>\n          </div>\n        ) : games.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <p className=\"text-xl mb-2 font-semibold\" style={{ color: currentColors.softLight }}>No games found</p>\n            <p className=\"text-sm mb-6\" style={{ color: currentColors.highlight }}>Add your first game to get started</p>\n            <button\n              onClick={handleFileSelect}\n              className=\"px-8 py-3.5 rounded-lg font-semibold transition-all hover:shadow-md active:scale-95\"\n              style={{ ...getGradientStyle(currentColors.gradientFrom, currentColors.gradientTo), color: currentColors.darkBg }}\n            >\n              Add Your First Game\n            </button>\n          </div>\n        ) : sortBy === 'system' && groupedGames ? (\n          <div>\n            {Object.entries(groupedGames).map(([category, categoryGames]) => (\n              <div key={category} className=\"mb-8 last:mb-0\">\n                <div className=\"flex items-center mb-4\">\n                  <h4 className=\"text-xs font-bold uppercase tracking-wider pr-3\" style={{ color: currentColors.highlight }}>\n                    {category}\n                  </h4>\n                  <div className=\"flex-1 h-px\" style={{ backgroundColor: currentColors.highlight + '30' }}></div>\n                </div>\n                <div className=\"flex flex-wrap\" style={{ gap: '1rem' }}>\n                  {categoryGames.map((game, index) => {\n                    const isGameDeleting = deletingGameIds.has(game.id);\n                    // Only count games that are NOT being deleted for animation purposes\n                    const visibleIndex = categoryGames.slice(0, index).filter(g => !deletingGameIds.has(g.id)).length;\n                    const reverseStaggerDelay = (categoryGames.length - 1 - index) * 0.03;\n                    return (\n                      <div key={game.id} style={{ animation: isGameDeleting ? `slideDown 0.4s ease-in-out ${reverseStaggerDelay}s forwards` : shouldAnimateEntries ? `fadeIn 0.5s ease-in-out ${visibleIndex * 0.03}s both` : 'none' }}>\n                        <GameCard game={game} onPlay={handlePlayClick} onEdit={handleEditGame} onDelete={handleDeleteGame} onSelect={toggleGameSelection} isSelected={selectedGameIds.has(game.id)} isDeleteMode={isDeleteMode} onEnterDeleteMode={() => setIsDeleteMode(true)} colors={currentColors} />\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"flex flex-wrap\" style={{ gap: '1rem' }}>\n            {sortedGames.map((game, index) => {\n              const isGameDeleting = deletingGameIds.has(game.id);\n              // Only count games that are NOT being deleted for animation purposes\n              const visibleIndex = sortedGames.slice(0, index).filter(g => !deletingGameIds.has(g.id)).length;\n              const reverseStaggerDelay = (sortedGames.length - 1 - index) * 0.03;\n              return (\n                <div key={game.id} style={{ animation: isGameDeleting ? `slideDown 0.4s ease-in-out ${reverseStaggerDelay}s forwards` : shouldAnimateEntries ? `fadeIn 0.5s ease-in-out ${visibleIndex * 0.03}s both` : 'none' }}>\n                  <GameCard game={game} onPlay={handlePlayClick} onEdit={handleEditGame} onDelete={handleDeleteGame} onSelect={toggleGameSelection} isSelected={selectedGameIds.has(game.id)} isDeleteMode={isDeleteMode} onEnterDeleteMode={() => setIsDeleteMode(true)} onCoverArtClick={(game) => {\n                    setEditingGame(game);\n                    setPendingGame(game);\n                    setCoverArtFit(game.coverArtFit || 'cover');\n                    setSystemPickerOpen(true);\n                  }} colors={currentColors} />\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {!isHydrated ? (\n        <div className=\"min-h-screen flex flex-col\" style={{ backgroundColor: '#0f0f0f', fontFamily: 'Inter, sans-serif' }} />\n      ) : (\n        <div className=\"min-h-screen flex flex-col\" style={{ backgroundColor: currentColors.darkBg, fontFamily: 'Inter, sans-serif' }}>\n          <div\n            className={`fixed inset-0 z-40 transition-all duration-300 ${isSidebarOpen ? 'bg-black/60 backdrop-blur-sm' : 'bg-black/0 backdrop-blur-none pointer-events-none'\n              }`}\n            onClick={() => setIsSidebarOpen(false)}\n          />\n          <aside className={sidebarFullClass} style={{ backgroundColor: currentColors.midDark, boxShadow: '4px 0 12px rgba(0, 0, 0, 0.3)' }}>\n            <div className=\"flex items-center gap-3 mb-12 animate-fade-in pb-6 border-b\" style={{ borderColor: currentColors.highlight + '30' }}>\n              <img src=\"/favicon.ico\" alt=\"Joe T Emulator\" className=\"w-12 h-12 flex-shrink-0\" />\n              <h2 className=\"text-2xl font-extrabold leading-tight\" style={{\n                backgroundImage: `linear-gradient(135deg, ${currentColors.softLight} 0%, ${currentColors.highlight} 100%)`,\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: '100% 100%',\n                WebkitBackgroundClip: 'text',\n                backgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                color: 'transparent',\n                fontFamily: 'Inter, sans-serif',\n                letterSpacing: '-0.02em'\n              }}>\n                Joe T Emulator\n              </h2>\n            </div>\n            <nav>\n              {[\n                { view: 'library' as const, icon: Gamepad2, label: 'Library' },\n                { view: 'themes' as const, icon: Palette, label: 'Themes' },\n                { view: 'about' as const, icon: Info, label: 'About' }\n              ].map(({ view, icon: Icon, label }, index) => (\n                <button\n                  key={view}\n                  className={getSidebarButtonClass(view) + \" hover:bg-opacity-50\"}\n                  style={{\n                    backgroundColor: activeView === view ? currentColors.sidebarHover : 'transparent',\n                    borderLeftColor: activeView === view ? currentColors.highlight : 'transparent',\n                    borderLeftWidth: activeView === view ? '4px' : '0px',\n                    color: currentColors.softLight,\n                    transition: 'all 0.2s ease',\n                    animation: `fadeInSlide 0.3s ease-out ${index * 0.1}s both`\n                  }}\n                  onClick={() => handleNavClick(view)}\n                >\n                  <Icon className=\"w-6 h-6 mr-3 transition-transform\" />\n                  <span className=\"font-semibold\">{label}</span>\n                </button>\n              ))}\n            </nav>\n          </aside>\n          <div className=\"flex-1 overflow-hidden\">\n            <main className=\"p-8 overflow-y-auto pb-20 scrollbar-hide\" style={{ minHeight: 'calc(100vh - 4rem)' }}>\n              <header className=\"mb-10\">\n                <div className=\"flex justify-between items-center\">\n                  <h1 className=\"text-4xl font-extrabold tracking-tight\" style={{ color: currentColors.softLight, textShadow: '0 2px 4px rgba(0,0,0,0.2)' }}>\n                    {activeView.charAt(0).toUpperCase() + activeView.slice(1)}\n                  </h1>\n                  <div className=\"flex items-center space-x-4\">\n                    {isMounted && (\n                      <div className=\"hidden sm:block text-sm font-medium px-3 py-1.5 rounded-lg transition-all\" style={{ color: currentColors.highlight, backgroundColor: currentColors.midDark }}>\n                        {currentTime}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </header>\n              {renderContent()}\n            </main>\n          </div>\n          {duplicateMessage && (\n            <div\n              className=\"fixed bottom-24 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-2xl z-60 animate-fade-in p-4 transition-opacity duration-300\"\n              onClick={() => setDuplicateMessage(null)}\n              style={{\n                backgroundColor: '#ef4444',\n                color: currentColors.softLight,\n                opacity: showDuplicateMessage ? 1 : 0,\n                transition: 'opacity 0.3s ease-out',\n                pointerEvents: showDuplicateMessage ? 'auto' : 'none'\n              }}\n            >\n              <div className=\"flex items-center gap-2\">\n                <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n                <span className=\"font-semibold\">{duplicateMessage}</span>\n              </div>\n            </div>\n          )}\n          <footer className=\"fixed bottom-0 left-0 right-0 h-16 border-t flex items-center justify-between px-6 z-50\" style={{ backgroundColor: currentColors.midDark, borderColor: currentColors.sidebarHover, boxShadow: '0 -4px 12px rgba(0, 0, 0, 0.3)' }}>\n            <button\n              className=\"p-2.5 rounded-lg transition-all hover:bg-opacity-50 active:scale-95\"\n              onClick={() => setIsSidebarOpen(!isSidebarOpen)}\n              style={{ color: currentColors.softLight, backgroundColor: isSidebarOpen ? currentColors.sidebarHover : 'transparent' }}\n            >\n              {isSidebarOpen ? <X className=\"w-7 h-7 transition-transform rotate-0\" /> : <Menu className=\"w-7 h-7 transition-transform\" />}\n            </button>\n            <div className=\"flex-1 mx-4\" />\n          </footer>\n          {(systemPickerOpen || systemPickerClosing) && (() => {\n            // SYSTEM_PICKER is already organized by category\n            const filteredCategories: Record<string, Array<[string, string]>> = {};\n\n            Object.entries(SYSTEM_PICKER).forEach(([category, systems]) => {\n              const filtered = Object.entries(systems).filter(([name]) =>\n                name.toLowerCase().includes(systemSearchQuery.toLowerCase())\n              );\n              if (filtered.length > 0) {\n                filteredCategories[category] = filtered;\n              }\n            });\n\n            const currentCore = editingGame?.core || pendingGame?.core;\n\n            return (\n              <div\n                className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4\"\n                onClick={() => closeSystemPicker()}\n                style={{ animation: systemPickerClosing ? 'fadeOut 0.2s ease-out' : 'fadeIn 0.2s ease-out' }}\n              >\n                <div\n                  className=\"p-6 rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl border\"\n                  style={{\n                    backgroundColor: currentColors.midDark,\n                    borderColor: currentColors.highlight + '30',\n                    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.7)',\n                    animation: systemPickerClosing ? 'slideDown 0.2s ease-out' : 'slideUp 0.3s ease-out'\n                  }}\n                  onClick={(e) => e.stopPropagation()}\n                >\n                  {/* Header */}\n                  <div className=\"mb-6\">\n                    <h3 className=\"text-3xl font-bold mb-2\" style={{ color: currentColors.softLight }}>\n                      {editingGame ? editingGame.title : pendingFiles.length > 1 ? `Add ${pendingFiles.length} Games` : 'Select System'}\n                    </h3>\n                    {editingGame && (\n                      <p className=\"text-sm opacity-70\" style={{ color: currentColors.highlight }}>\n                        Choose a system and cover art\n                      </p>\n                    )}\n                    {pendingFiles.length > 1 && (\n                      <p className=\"text-sm opacity-70\" style={{ color: currentColors.highlight }}>\n                        Choose a system for {pendingFiles.length} files\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Main Content: Cover Art + Systems */}\n                  <div className=\"flex gap-6 flex-1 min-h-0\">\n                    {/* Cover Art Section - only show when editing or adding single game (not multi-file batch) */}\n                    {pendingFiles.length <= 1 && (\n                      <div className=\"flex-shrink-0 w-80 space-y-4\">\n                        <div className=\"rounded-xl border overflow-hidden\" style={{ borderColor: currentColors.highlight + '30', backgroundColor: currentColors.darkBg }}>\n                          {(editingGame?.coverArt || pendingGame?.coverArt) ? (\n                            <div className=\"relative group\">\n                              <div className=\"aspect-[4/5] w-full overflow-hidden bg-black/20 relative\">\n                                <img\n                                  src={editingGame?.coverArt || pendingGame?.coverArt}\n                                  alt=\"Cover art\"\n                                  className=\"w-full h-full\"\n                                  style={{\n                                    objectFit: coverArtFit,\n                                    objectPosition: 'center'\n                                  }}\n                                />\n                              </div>\n                              <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                <button\n                                  onClick={removeCoverArt}\n                                  className=\"px-3 py-2.5 rounded-lg transition-all hover:shadow-md active:scale-95 flex items-center justify-center\"\n                                  style={{ backgroundColor: '#ef4444', color: currentColors.softLight }}\n                                  title=\"Remove cover art\"\n                                >\n                                  <Trash2 className=\"w-5 h-5\" />\n                                </button>\n                              </div>\n                            </div>\n                          ) : (\n                            <div className=\"aspect-[3/4] w-full flex items-center justify-center bg-gradient-to-br\" style={{ background: `linear-gradient(135deg, ${currentColors.darkBg} 0%, ${currentColors.midDark} 100%)` }}>\n                              <div className=\"text-center p-6\">\n                                <div className=\"w-16 h-16 mx-auto mb-4 rounded-lg flex items-center justify-center\" style={{ backgroundColor: currentColors.highlight + '20' }}>\n                                  <svg className=\"w-8 h-8\" style={{ color: currentColors.highlight }} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                                  </svg>\n                                </div>\n                                <p className=\"text-sm font-medium\" style={{ color: currentColors.softLight }}>\n                                  No Cover Art\n                                </p>\n                              </div>\n                            </div>\n                          )}\n                          {(editingGame?.coverArt || pendingGame?.coverArt) && (\n                            <div className=\"p-4 border-t\" style={{ borderColor: currentColors.highlight + '30' }}>\n                              <button\n                                onClick={() => {\n                                  const newFit = coverArtFit === 'contain' ? 'cover' : 'contain';\n                                  setCoverArtFit(newFit);\n                                  updateCoverArtFit(newFit);\n                                }}\n                                className=\"w-full px-4 py-2.5 rounded-lg transition-all text-sm font-semibold text-center active:scale-95\"\n                                style={{\n                                  backgroundColor: currentColors.highlight,\n                                  color: currentColors.darkBg,\n                                }}\n                              >\n                                {coverArtFit === 'contain' ? 'Zoom to Fill' : 'Shrink to Fit'}\n                              </button>\n                            </div>\n                          )}\n                          <div className=\"p-4 border-t\" style={{ borderColor: currentColors.highlight + '30' }}>\n                            <input\n                              type=\"file\"\n                              accept=\"image/*\"\n                              onChange={(e) => {\n                                const file = e.target.files?.[0];\n                                if (file) {\n                                  handleCoverArtFileUpload(file);\n                                }\n                              }}\n                              className=\"hidden\"\n                              id=\"cover-art-file-input\"\n                            />\n                            <label\n                              htmlFor=\"cover-art-file-input\"\n                              className=\"block w-full px-4 py-2.5 rounded-lg transition-all text-sm font-semibold text-center active:scale-95\"\n                              style={{\n                                ...((editingGame?.coverArt || pendingGame?.coverArt) ? { backgroundColor: currentColors.highlight } : getGradientStyle(currentColors.gradientFrom, currentColors.gradientTo)),\n                                color: currentColors.darkBg,\n                              }}\n                            >\n                              {(editingGame?.coverArt || pendingGame?.coverArt) ? 'Change Image' : 'Upload Cover Art'}\n                            </label>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Systems Section */}\n                    <div className={pendingFiles.length > 1 ? \"w-full flex flex-col min-w-0\" : \"flex-1 flex flex-col min-w-0\"}>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search systems...\"\n                        value={systemSearchQuery}\n                        onChange={(e) => setSystemSearchQuery(e.target.value)}\n                        onFocus={() => setSearchFocused(true)}\n                        onBlur={() => setSearchFocused(false)}\n                        className=\"w-full px-4 py-3 rounded-xl border-2 transition-all focus:outline-none mb-4\"\n                        style={{\n                          backgroundColor: currentColors.darkBg,\n                          borderColor: searchFocused ? currentColors.playGreen : currentColors.highlight + '50',\n                          color: currentColors.softLight,\n                          boxShadow: searchFocused ? `0 0 0 2px ${currentColors.playGreen}30` : 'none',\n                        }}\n                        autoFocus\n                      />\n\n                      <div className=\"flex-1 overflow-y-auto pr-2 scrollbar-hide\">\n                        {Object.entries(filteredCategories).map(([category, systems]) => (\n                          <div key={category} className=\"mb-6 last:mb-0\">\n                            <div className=\"flex items-center mb-3\">\n                              <h4 className=\"text-xs font-bold uppercase tracking-wider pr-3\" style={{ color: currentColors.highlight }}>\n                                {category}\n                              </h4>\n                              <div className=\"flex-1 h-px\" style={{ backgroundColor: currentColors.highlight + '30' }}></div>\n                            </div>\n                            <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2.5\">\n                              {systems.map(([name, core], index) => {\n                                const isSelected = currentCore === core;\n                                return (\n                                  <button\n                                    key={core}\n                                    className=\"p-3.5 rounded-xl text-left transition-all active:scale-[0.97] border-2 relative flex items-center justify-between group\"\n                                    style={{\n                                      ...(isSelected ? getGradientStyle(currentColors.gradientFrom, currentColors.gradientTo) : { backgroundColor: currentColors.sidebarHover }),\n                                      borderColor: isSelected ? currentColors.playGreen : currentColors.highlight + '30',\n                                      color: isSelected ? currentColors.darkBg : currentColors.softLight,\n                                      boxShadow: isSelected ? `0 2px 8px ${currentColors.playGreen}30` : '0 2px 4px rgba(0, 0, 0, 0.2)',\n                                      animation: `fadeIn 0.4s ease-out ${index * 0.03}s both`\n                                    }}\n                                    onMouseEnter={(e) => {\n                                      if (!isSelected) {\n                                        e.currentTarget.style.backgroundColor = currentColors.highlight + '20';\n                                        e.currentTarget.style.borderColor = currentColors.highlight + '50';\n                                      }\n                                    }}\n                                    onMouseLeave={(e) => {\n                                      if (!isSelected) {\n                                        e.currentTarget.style.backgroundColor = currentColors.sidebarHover;\n                                        e.currentTarget.style.borderColor = currentColors.highlight + '30';\n                                      }\n                                    }}\n                                    onClick={() => selectSystem(core)}\n                                  >\n                                    <span className=\"font-medium text-sm leading-tight truncate pr-2 flex-1\">\n                                      {name}\n                                    </span>\n                                    <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center\">\n                                      {isSelected && (\n                                        <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                                        </svg>\n                                      )}\n                                    </div>\n                                  </button>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        ))}\n                        {Object.keys(filteredCategories).length === 0 && (\n                          <div className=\"text-center py-16\" style={{ color: currentColors.highlight }}>\n                            <div className=\"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center\" style={{ backgroundColor: currentColors.highlight + '15' }}>\n                              <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                              </svg>\n                            </div>\n                            <p className=\"text-lg font-semibold mb-1\" style={{ color: currentColors.softLight }}>No systems found</p>\n                            <p className=\"text-sm opacity-70\">Try a different search term</p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t\" style={{ borderColor: currentColors.highlight + '30' }}>\n                    {(editingGame || (pendingFiles.length === 1 && pendingGame)) && (\n                      <button\n                        className=\"py-2.5 px-6 rounded-lg font-semibold transition-all active:scale-95\"\n                        style={{ ...getGradientStyle(currentColors.gradientFrom, currentColors.gradientTo), color: currentColors.darkBg }}\n                        onClick={handleSystemPickerDone}\n                      >\n                        Done\n                      </button>\n                    )}\n                    <button\n                      className=\"py-2.5 px-6 rounded-lg font-semibold transition-all active:scale-95\"\n                      style={{ backgroundColor: currentColors.highlight, color: currentColors.darkBg }}\n                      onClick={() => closeSystemPicker()}\n                    >\n                      {editingGame ? 'Cancel' : 'Close'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })()}\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}