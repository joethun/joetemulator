(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,t,r)=>{"use strict";var a=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;r.c=function(e){return a.H.useMemoCache(e)}},932,(e,t,r)=>{"use strict";t.exports=e.r(79474)},52683,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a={fds:"nes",nes:"nes",unif:"nes",unf:"nes",gb:"gb",gbc:"gbc",gba:"gba",smc:"snes",sfc:"snes",swc:"snes",vb:"vb",vboy:"vb",z64:"n64",n64:"n64",nds:"nds",sms:"segaMS",md:"segaMD",gen:"segaMD",smd:"segaMD",gg:"segaGG","32x":"sega32x",cso:"psp",pbp:"psp",a26:"atari2600",a52:"atari5200",a78:"atari7800",lnx:"lynx",j64:"jaguar",jag:"jaguar",d64:"vice_x64",t64:"vice_x64",tap:"vice_x64",crt:"vice_x64",col:"coleco",cv:"coleco",pce:"pce",ngp:"ngp",ngc:"ngp",ws:"ws",wsc:"ws"},l={Nintendo:{NES:"nes","Game Boy":"gb","Game Boy Color":"gbc","Game Boy Advance":"gba",SNES:"snes","Virtual Boy":"vb",N64:"n64",DS:"nds"},Sega:{"Master System":"segaMS","Genesis/Mega Drive":"segaMD","Game Gear":"segaGG",CD:"segaCD","32X":"sega32x",Saturn:"segaSaturn"},Sony:{PS1:"psx",PSP:"psp"},Atari:{2600:"atari2600",5200:"atari5200",7800:"atari7800",Lynx:"lynx",Jaguar:"jaguar"},Other:{"Panasonic 3DO":"opera","Arcade (FBNeo)":"arcade","Arcade (M.A.M.E)":"mame2003_plus","Microsoft DOS":"dosbox_pure","Commodore PET":"vice_xpet","Commodore VIC-20":"vice_xvic","Commodore Amiga":"amiga","Commodore 64":"vice_x64","Commodore 128":"vice_x128","Commodore Plus/4":"vice_xplus4",ColecoVision:"coleco","NEC TurboGrafx-16":"pce","NEC PC-FX":"pcfx","SNK Neo Geo Pocket":"ngp","Bandai WonderSwan":"ws"}};function o(e){for(let t of Object.values(l))for(let[r,a]of Object.entries(t))if(a===e)return r;return"Unknown System"}let s="https://cdn.jsdelivr.net/gh/joethun/EmulatorJS-With-Cores/";async function i(e){return a[e]||"nes"}function n(e){if("undefined"==typeof document)return;["aside","footer","main","header"].forEach(t=>{let r=document.querySelector(t);r&&(r.style.cssText=e?"":"display: none !important; visibility: hidden !important; z-index: -1 !important;")});let t=document.querySelector('div[style*="min-h-screen"]');t&&!e&&(t.style.cssText+=" z-index: -1 !important;")}window.gameRunning=!1;let c=`
  width: 100%;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 999999;
  background-color: #000000;
  overflow: hidden;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
`;async function d(e,t,r){var a,l,o,d;let h,m=e instanceof File?e.name:e,g=m.split(".").pop()?.toLowerCase()||"",f=m.substring(0,m.lastIndexOf(".")),u=t||await i(g);(h=document.getElementById("game"))&&(h.innerHTML="",h.style.display="none"),document.querySelectorAll('script[src*="loader.js"]').forEach(e=>e.remove()),n(!0),window.gameRunning=!1,n(!1),function(){let e;if("undefined"==typeof document)return;let t=document.getElementById("game")||((e=document.createElement("div")).id="game",document.body.appendChild(e),e);t.innerHTML="",t.style.cssText=c,document.body&&(document.body.style.overflow="hidden"),document.documentElement&&(document.documentElement.style.overflow="hidden")}(),window.gameRunning=!0,a=f,l=e,o=u,d=r,window.EJS_color=d||"#00ff7f",window.EJS_backgroundColor="#000000",window.EJS_player="#game",window.EJS_gameName=a,window.EJS_gameUrl=l,window.EJS_core=o,window.EJS_pathtodata=s,window.EJS_startOnLoaded=!0,window.EJS_biosUrl="",window.EJS_threads=["psp","dosbox_pure"].includes(o),window.EJS_defaultOptions={"save-save-interval":"60",desmume_advanced_timing:"disabled",webgl2Enabled:"enabled",..."segaGG"===o&&{retroarch_core:"genesis_plus_gx"},..."nds"===o&&{retroarch_core:"desmume"}},window.EJS_Buttons={exitEmulation:!1,cacheManager:!1,saveSavFiles:{visible:!1},loadSavFiles:{visible:!1}},function(){if("undefined"==typeof document)return;let e=document.createElement("script");e.src=`${s}/loader.js`,e.onload=()=>setTimeout(()=>{let e=document.getElementById("game");if(e){e.style.cssText=c.replace(/\n/g," ").replace(/\s+/g," ").trim()+" !important";let t=e.querySelector("canvas");t&&(t.style.cssText="display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; height: 100% !important;")}},100),document.body.appendChild(e)}()}var h=e.i(3053);let m={default:{highlight:"#8899cc",darkBg:"#0a0a0f",midDark:"#151520",softLight:"#e8eef5",sidebarHover:"#1f2535",playGreen:"#4a90e2",gradientFrom:"#4a90e2",gradientTo:"#2563eb"},red:{highlight:"#fecaca",darkBg:"#1f0a0a",midDark:"#2e1414",softLight:"#fef2f2",sidebarHover:"#3d1f1f",playGreen:"#f87171",gradientFrom:"#f87171",gradientTo:"#ef4444"},orange:{highlight:"#fde68a",darkBg:"#1f1206",midDark:"#2e1a0a",softLight:"#fffbeb",sidebarHover:"#3d2814",playGreen:"#fbbf24",gradientFrom:"#fbbf24",gradientTo:"#f59e0b"},yellow:{highlight:"#fef08a",darkBg:"#1f1a0a",midDark:"#2e2814",softLight:"#fefce8",sidebarHover:"#3d3d1f",playGreen:"#eab308",gradientFrom:"#eab308",gradientTo:"#ca8a04"},green:{highlight:"#bbf7d0",darkBg:"#0f1a0f",midDark:"#1e2e1e",softLight:"#f0fdf4",sidebarHover:"#2d3e2d",playGreen:"#4ade80",gradientFrom:"#4ade80",gradientTo:"#22c55e"},teal:{highlight:"#99f6e4",darkBg:"#0a1a1a",midDark:"#142a2a",softLight:"#f0fdfa",sidebarHover:"#1f3d3d",playGreen:"#2dd4bf",gradientFrom:"#2dd4bf",gradientTo:"#14b8a6"},blue:{highlight:"#bfdbfe",darkBg:"#0c1220",midDark:"#1e293b",softLight:"#eff6ff",sidebarHover:"#334155",playGreen:"#60a5fa",gradientFrom:"#60a5fa",gradientTo:"#3b82f6"},indigo:{highlight:"#c7d2fe",darkBg:"#0f0f1f",midDark:"#1e1e2e",softLight:"#eef2ff",sidebarHover:"#2d2d3e",playGreen:"#818cf8",gradientFrom:"#818cf8",gradientTo:"#6366f1"},purple:{highlight:"#ddd6fe",darkBg:"#1a0f2e",midDark:"#2d1b3d",softLight:"#faf5ff",sidebarHover:"#3f2d52",playGreen:"#c084fc",gradientFrom:"#c084fc",gradientTo:"#a855f7"}},g=(e,t)=>({background:`linear-gradient(135deg, ${e} 0%, ${t} 100%)`});var f=e.i(932);let u=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},x=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let y=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:s,iconNode:i,...n},c)=>(0,r.createElement)("svg",{ref:c,...p,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:x("lucide",o),...!s&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(n)&&{"aria-hidden":"true"},...n},[...i.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(s)?s:[s]])),b=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...l},o)=>(0,r.createElement)(y,{ref:o,iconNode:t,className:x(`lucide-${u(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...l}));return a.displayName=u(e),a},v=b("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),w=b("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function j(e){let r,a,l,o,s,i,n,c,d,h=(0,f.c)(46),{game:m,onPlay:u,onEdit:x,onDelete:p,onSelect:y,isSelected:b,isDeleteMode:j,onEnterDeleteMode:k,onCoverArtClick:N,colors:C}=e,S=`group relative overflow-hidden w-64 h-80 rounded-xl transition-all duration-300 ease-in-out hover:shadow-lg hover:z-10 border animate-border-breathe ${j?"animate-shake":"hover:scale-[1.02]"}`,A=j&&b?"#ef4444":C.midDark;if(h[0]!==C.highlight||h[1]!==A?(r={backgroundColor:A,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.3)",borderColor:C.highlight},h[0]=C.highlight,h[1]=A,h[2]=r):r=h[2],h[3]!==m.id||h[4]!==j||h[5]!==y?(a=()=>j&&y(m.id),h[3]=m.id,h[4]=j,h[5]=y,h[6]=a):a=h[6],h[7]!==j||h[8]!==b?(l=j&&b&&(0,t.jsx)("div",{className:"absolute inset-0 bg-red-500/40 z-20 flex items-center justify-center rounded-xl",children:(0,t.jsx)(v,{className:"w-16 h-16 text-white drop-shadow-lg"})}),h[7]=j,h[8]=b,h[9]=l):l=h[9],h[10]!==j||h[11]!==b?(o=j&&(0,t.jsx)("div",{className:"absolute bottom-3 right-3 z-20",children:(0,t.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white flex items-center justify-center transition-all",style:{backgroundColor:b?"white":"transparent"},children:b&&(0,t.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),h[10]=j,h[11]=b,h[12]=o):o=h[12],h[13]!==C.gradientFrom||h[14]!==C.gradientTo||h[15]!==m.coverArt||h[16]!==m.coverArtFit?(s=m.coverArt?{backgroundImage:`url(${m.coverArt})`,backgroundColor:"transparent",backgroundSize:m.coverArtFit||"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{...g(C.gradientFrom,C.gradientTo)},h[13]=C.gradientFrom,h[14]=C.gradientTo,h[15]=m.coverArt,h[16]=m.coverArtFit,h[17]=s):s=h[17],h[18]!==C.darkBg||h[19]!==m||h[20]!==j||h[21]!==N){var L;i=!m.coverArt&&(0,t.jsxs)("div",{className:"flex items-center justify-center",style:{color:C.darkBg},children:[(0,t.jsx)("span",{className:"text-4xl font-bold tracking-wide",style:{textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:(L=m.core)?({nes:"NES",gb:"GB",gbc:"GBC",gba:"GBA",snes:"SNES",vb:"VB",n64:"N64",nds:"DS",segaMS:"MS",segaMD:"MD",segaGG:"GG",segaCD:"CD",sega32x:"32X",segaSaturn:"Saturn",psx:"PS1",psp:"PSP",atari2600:"2600",atari5200:"5200",atari7800:"7800",lynx:"Lynx",jaguar:"Jaguar",opera:"3DO",arcade:"Arcade",mame2003_plus:"MAME",dosbox_pure:"DOS",vice_xpet:"PET",vice_xvic:"VIC20",amiga:"Amiga",vice_x64:"C64",vice_x128:"C128",vice_xplus4:"Plus/4",coleco:"Coleco",pce:"TG16",pcfx:"PC-FX",ngp:"NGP",ws:"WS"})[L]||L.toUpperCase():"Unknown"}),N&&!j&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),N(m)},className:"absolute inset-0",children:(0,t.jsx)("span",{className:"sr-only",children:"Add cover art"})})]}),h[18]=C.darkBg,h[19]=m,h[20]=j,h[21]=N,h[22]=i}else i=h[22];return h[23]!==s||h[24]!==i?(n=(0,t.jsx)("div",{className:"h-full flex items-center justify-center bg-cover bg-center bg-no-repeat relative",style:s,children:i}),h[23]=s,h[24]=i,h[25]=n):n=h[25],h[26]!==C.darkBg||h[27]!==C.gradientFrom||h[28]!==C.gradientTo||h[29]!==C.highlight||h[30]!==C.softLight||h[31]!==m||h[32]!==j||h[33]!==p||h[34]!==x||h[35]!==k||h[36]!==u?(c=!j&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent backdrop-brightness-75 flex flex-col justify-end p-5 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,t.jsxs)("div",{className:"transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-400 ease-out",children:[(0,t.jsx)("h3",{className:"text-xl font-bold truncate mb-1.5",style:{color:C.softLight,textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:m.title}),(0,t.jsx)("p",{className:"text-sm mb-3",style:{color:C.highlight},children:m.genre}),(0,t.jsxs)("div",{className:"flex gap-2.5 items-stretch mt-3",children:[(0,t.jsx)("button",{className:"w-full font-bold py-2.5 px-4 rounded-lg transition-all text-sm hover:shadow-md active:scale-[0.98] flex-1",style:{...g(C.gradientFrom,C.gradientTo),color:C.darkBg},onClick:e=>{e.stopPropagation(),u(m)},children:"PLAY"}),(0,t.jsx)("button",{className:"px-3 py-2.5 rounded-lg transition-all hover:shadow-md active:scale-95 flex items-center justify-center",style:{backgroundColor:C.highlight,color:C.darkBg},onClick:e=>{e.stopPropagation(),x(m)},children:(0,t.jsx)(w,{className:"w-5 h-5"})}),(0,t.jsx)("button",{className:"px-3 py-2.5 rounded-lg transition-all hover:shadow-md active:scale-95 flex items-center justify-center select-none",style:{backgroundColor:"#ef4444",color:"#ffffff"},onMouseDown:e=>{e.stopPropagation();let t=setTimeout(()=>{k()},500),r=()=>clearTimeout(t);e.currentTarget.addEventListener("mouseup",r,{once:!0}),e.currentTarget.addEventListener("mouseleave",r,{once:!0})},onTouchStart:e=>{e.stopPropagation();let t=setTimeout(()=>{k()},500);e.currentTarget.addEventListener("touchend",()=>clearTimeout(t),{once:!0})},onClick:e=>{e.stopPropagation(),p(m)},children:(0,t.jsx)(v,{className:"w-5 h-5"})})]})]})}),h[26]=C.darkBg,h[27]=C.gradientFrom,h[28]=C.gradientTo,h[29]=C.highlight,h[30]=C.softLight,h[31]=m,h[32]=j,h[33]=p,h[34]=x,h[35]=k,h[36]=u,h[37]=c):c=h[37],h[38]!==S||h[39]!==r||h[40]!==a||h[41]!==l||h[42]!==o||h[43]!==n||h[44]!==c?(d=(0,t.jsxs)("div",{className:S,style:r,onClick:a,children:[l,o,n,c]}),h[38]=S,h[39]=r,h[40]=a,h[41]=l,h[42]=o,h[43]=n,h[44]=c,h[45]=d):d=h[45],d}let k=b("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),N=b("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),C=b("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),S=b("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A=b("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),L=b("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),E=b("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),T=b("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function F(){let s,i,[n,c]=(0,r.useState)("library"),[f,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[w,F]=(0,r.useState)([]),[B,D]=(0,r.useState)(null),[M,_]=(0,r.useState)(!1),[G,O]=(0,r.useState)(!1),[P,I]=(0,r.useState)(null),[$,z]=(0,r.useState)([]),[R,J]=(0,r.useState)(""),[H,U]=(0,r.useState)(null),[W,q]=(0,r.useState)(!1),[V,X]=(0,r.useState)(!0),[K,Z]=(0,r.useState)("default"),[Y,Q]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[er,ea]=(0,r.useState)(""),[el,eo]=(0,r.useState)(!1),[es,ei]=(0,r.useState)("cover"),[en,ec]=(0,r.useState)("title"),[ed,eh]=(0,r.useState)("asc"),[em,eg]=(0,r.useState)(!1),[ef,eu]=(0,r.useState)(new Set),[ex,ep]=(0,r.useState)(!1),[ey,eb]=(0,r.useState)(new Set),ev=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{Z(localStorage.getItem("theme")||"default"),eg(!0)},[]),(0,r.useEffect)(()=>{localStorage.setItem("theme",K)},[K]),(0,r.useEffect)(()=>{let e=localStorage.getItem("sortBy")||"title",t=localStorage.getItem("sortOrder")||"asc";ec(e),eh(t);let r=()=>{p(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))};r(),b(!0);let a=setInterval(r,6e4);return(async()=>{X(!0);let e=localStorage.getItem("games");if(e)try{let t=JSON.parse(e),r=t;for(let e of t)e.fileData&&(r=await ek(e,r));(r=r.map(e=>{let t={...e};return"ROM"===e.genre&&e.core&&(t.genre=o(e.core)),e.coverArt&&!e.coverArtFit&&(t.coverArtFit="cover"),t}))!==t&&localStorage.setItem("games",JSON.stringify(r)),F(r)}catch(e){console.error("Failed to load games from storage",e)}X(!1)})(),()=>clearInterval(a)},[]),(0,r.useEffect)(()=>{localStorage.setItem("sortBy",en)},[en]),(0,r.useEffect)(()=>{localStorage.setItem("sortOrder",ed)},[ed]);let ew=()=>{O(!0),setTimeout(()=>{_(!1),O(!1),z([]),I(null),D(null),J("")},200)},ej=async()=>{if(B)return void ew();if(1===$.length&&P?.core)try{let{file:e}=$[0],t=P.id??Date.now(),r=P.fileName||e.name,a=P.title||e.name.replace(/\.[^/.]+$/,""),l=P.genre||o(P.core)||"Unknown System";if(w.some(t=>t.fileName===e.name)){U(`"${e.name}" is already in your library`),q(!0),ew(),setTimeout(()=>q(!1),2500),setTimeout(()=>U(null),3e3);return}await (0,h.saveGameFile)(t,e);let s={id:t,title:a,genre:l,filePath:P.filePath||e.name,fileName:r,core:P.core,coverArt:P.coverArt,coverArtFit:P.coverArt?P.coverArtFit||es:void 0},i=[...w,s];F(i),localStorage.setItem("games",JSON.stringify(i))}catch(e){console.error("Error finalizing game addition:",e)}ew()},ek=async(e,t)=>{if(!e.fileData||!e.fileData.startsWith("data:"))return t;try{let r=await fetch(e.fileData),a=await r.blob(),l=new File([a],e.fileName||e.title,{type:"application/octet-stream"});await (0,h.saveGameFile)(e.id,l);let{fileData:o,...s}=e;return t.map(t=>t.id===e.id?s:t)}catch(e){return console.error("Error migrating game to IndexedDB:",e),t}},eN=e=>a[e.toLowerCase()]||null,eC=async(e,t,r,a)=>{let l=e.name,s=l.replace(/\.[^/.]+$/,""),i=l.split(".").pop()?.toLowerCase()||"",n=a||w;if(n.some(t=>t.fileName===l||t.filePath===e.name))return U(`"${l}" is already in your library`),q(!0),setTimeout(()=>q(!1),2500),setTimeout(()=>U(null),3e3),n;let c=r||eN(i),d=Date.now()+t;await (0,h.saveGameFile)(d,e);let m={id:d,title:s,genre:c?o(c):"Unknown System",filePath:e.name,fileName:l,core:c||void 0};if(c){let e=[...n,m];return F(e),localStorage.setItem("games",JSON.stringify(e)),e}return n},eS=async e=>{let t=o(e);if($.length>1){let t=w;for(let{file:r,index:a}of $)t=await eC(r,a,e,t);z([]),ew();return}if(B){let r=w.map(r=>r.id===B.id?{...r,core:e,genre:t}:r);F(r),localStorage.setItem("games",JSON.stringify(r)),D({...B,core:e,genre:t}),P&&I({...P,core:e,genre:t})}else P&&I({...P,core:e,genre:t})},eA=async e=>{if(e)if(B){let t=w.map(t=>t.id===B.id?{...t,coverArt:e,coverArtFit:es}:t);F(t),localStorage.setItem("games",JSON.stringify(t)),D({...B,coverArt:e,coverArtFit:es}),P&&P.id===B.id&&I({...P,coverArt:e,coverArtFit:es})}else P&&I({...P,coverArt:e,coverArtFit:es})},eL=async e=>{try{let t=new FileReader;t.onload=e=>{let t=e.target?.result;eA(t)},t.onerror=()=>{console.error("Error reading file")},t.readAsDataURL(e)}catch(e){console.error("Error uploading cover art:",e)}},eE=async()=>{try{let e=[];if("showOpenFilePicker"in window){let t=await window.showOpenFilePicker({multiple:!0});e=await Promise.all(t.map(e=>e.getFile()))}else e=await new Promise(e=>{let t=document.createElement("input");t.type="file",t.multiple=!0,t.onchange=t=>{e(Array.from(t.target.files||[]))},t.click()});let t=[],r=w;for(let a=0;a<e.length;a++){let l=e[a],o=l.name.split(".").pop()?.toLowerCase()||"",s=eN(o);s?r=await eC(l,a,s,r):t.push({file:l,index:a})}let a=t.filter(({file:e})=>{let t=e.name;return!r.some(r=>r.fileName===t||r.filePath===e.name)});if(a.length>0){if(z(a),1===a.length){let e=a[0].file.name,t=e.replace(/\.[^/.]+$/,"");I({id:Date.now(),title:t,genre:"Unknown",filePath:e,fileName:e})}else I(null);ei("cover"),_(!0)}else t.length>0&&(1===t.length?U(`The file "${t[0].file.name}" is already in your library`):U(`All ${t.length} selected files are already in your library`),q(!0),setTimeout(()=>q(!1),2e3),setTimeout(()=>U(null),2500))}catch(e){"AbortError"!==e.name&&console.error("Error selecting files:",e)}},eT=e=>{D(e),I({...e}),ei(e.coverArtFit||"cover"),_(!0)},eF=async t=>{if(confirm(`Are you sure you want to delete "${t.title}"?`))try{let{deleteGameFile:r}=await e.A(44025);eb(e=>{let r=new Set(e);return r.add(t.id),r}),await new Promise(e=>setTimeout(e,400)),await r(t.id);let a=w.filter(e=>e.id!==t.id);F(a),localStorage.setItem("games",JSON.stringify(a)),eb(e=>{let r=new Set(e);return r.delete(t.id),r})}catch(e){console.error("Error deleting game:",e)}},eB=e=>{let t=new Set(ef);t.has(e)?t.delete(e):t.add(e),eu(t)},eD=async()=>{if(0!==ef.size&&confirm(`Are you sure you want to delete ${ef.size} game(s)? This action cannot be undone.`))try{let{deleteGameFile:t}=await e.A(44025);for(let e of(eb(new Set(ef)),await new Promise(e=>setTimeout(e,400)),ef))await t(e);let r=w.filter(e=>!ef.has(e.id));F(r),localStorage.setItem("games",JSON.stringify(r)),eu(new Set),eb(new Set),ep(!1)}catch(e){console.error("Error deleting games:",e)}};(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(!1);let eM=async e=>{try{let t=null;if(!(t=await (0,h.getGameFile)(e.id))&&e.fileData){let r=await fetch(e.fileData),a=await r.blob();t=new File([a],e.fileName||e.title,{type:"application/octet-stream"}),await (0,h.saveGameFile)(e.id,t)}t?await d(t,e.core,eG.playGreen):console.error("Game file not found")}catch(e){console.error("Error loading game:",e)}},e_=`w-64 p-6 flex flex-col justify-start shadow-xl fixed left-0 top-0 bottom-0 z-50 transition-all duration-300 ease-in-out ${f?"translate-x-0":"-translate-x-full"}`,eG=m[K]||m.default,eO=(0,r.useMemo)(()=>{let e=[...w];if(er.trim()){let t=er.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.genre.toLowerCase().includes(t))}return e.sort((e,t)=>{let r=0;return"title"===en?r=e.title.localeCompare(t.title):"system"===en&&(r=e.genre.localeCompare(t.genre)),"asc"===ed?r:-r}),e},[w,en,ed,er]),eP=(0,r.useMemo)(()=>{if("system"!==en)return null;let e=["Nintendo","Sega","Sony","Atari","Other"],t={Nintendo:[],Sega:[],Sony:[],Atari:[],Other:[]};eO.forEach(e=>{t[(e=>{if(!e)return"Other";for(let[t,r]of Object.entries(l))if(Object.values(r).includes(e))return t;return"Other"})(e.core)].push(e)}),"desc"===ed&&e.reverse();let r={};return e.forEach(e=>{t[e].length>0&&(r[e]=t[e])}),r},[eO,en,ed]);return(0,t.jsx)(t.Fragment,{children:em?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:eG.darkBg,fontFamily:"Inter, sans-serif"},children:[(0,t.jsx)("div",{className:`fixed inset-0 z-40 transition-all duration-300 ${f?"bg-black/60 backdrop-blur-sm":"bg-black/0 backdrop-blur-none pointer-events-none"}`,onClick:()=>u(!1)}),(0,t.jsxs)("aside",{className:e_,style:{backgroundColor:eG.midDark,boxShadow:"4px 0 12px rgba(0, 0, 0, 0.3)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-12 animate-fade-in pb-6 border-b",style:{borderColor:eG.highlight+"30"},children:[(0,t.jsx)("img",{src:"/favicon.ico",alt:"Joe T Emulator",className:"w-12 h-12 flex-shrink-0"}),(0,t.jsx)("h2",{className:"text-2xl font-extrabold leading-tight",style:{backgroundImage:`linear-gradient(135deg, ${eG.softLight} 0%, ${eG.highlight} 100%)`,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",fontFamily:"Inter, sans-serif",letterSpacing:"-0.02em"},children:"Joe T Emulator"})]}),(0,t.jsx)("nav",{children:[{view:"library",icon:k,label:"Library"},{view:"themes",icon:N,label:"Themes"}].map(({view:e,icon:r,label:a},l)=>{let o;return(0,t.jsxs)("button",{className:(o=n===e,`sidebar-item block p-3 mb-2 rounded-lg transition-all flex items-center border-l-4 hover:translate-x-1 ${o?"border-l-4":"border-transparent"} hover:bg-opacity-50`),style:{backgroundColor:n===e?eG.sidebarHover:"transparent",borderLeftColor:n===e?eG.highlight:"transparent",borderLeftWidth:n===e?"4px":"0px",color:eG.softLight,transition:"all 0.2s ease",animation:`fadeInSlide 0.3s ease-out ${.1*l}s both`},onClick:()=>{c(e),u(!1)},children:[(0,t.jsx)(r,{className:"w-6 h-6 mr-3 transition-transform"}),(0,t.jsx)("span",{className:"font-semibold",children:a})]},e)})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsxs)("main",{className:"p-8 overflow-y-auto pb-20 scrollbar-hide",style:{minHeight:"calc(100vh - 4rem)"},children:[(0,t.jsx)("header",{className:"mb-10",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight",style:{color:eG.softLight,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:y&&(0,t.jsx)("div",{className:"hidden sm:block text-sm font-medium px-3 py-1.5 rounded-lg transition-all",style:{color:eG.softLight,backgroundColor:eG.midDark},children:x})})]})}),"themes"===n?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsx)("h2",{className:"text-2xl font-bold",style:{color:eG.softLight},children:"Select Theme"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(m).map(([e,r])=>(0,t.jsxs)("button",{onClick:()=>{Z(e)},className:"p-6 rounded-xl transition-all border-2 relative overflow-hidden",style:{backgroundColor:r.midDark,borderColor:K===e?r.playGreen:r.highlight+"40",boxShadow:K===e?`0 2px 8px ${r.playGreen}30`:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold capitalize",style:{color:r.softLight},children:e}),K===e&&(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",style:{color:r.playGreen},children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"flex-1 h-12 rounded-lg",style:{backgroundColor:r.darkBg}}),(0,t.jsx)("div",{className:"flex-1 h-12 rounded-lg",style:{backgroundColor:r.midDark}}),(0,t.jsx)("div",{className:"flex-1 h-12 rounded-lg",style:{backgroundColor:r.playGreen}}),(0,t.jsx)("div",{className:"flex-1 h-12 rounded-lg",style:{backgroundColor:r.highlight}})]})]},e))})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold mb-4",style:{color:eG.softLight},children:["Games (",eO.length,")"]}),w.length>0&&(0,t.jsx)("div",{className:"flex flex-col gap-4 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 items-center flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center rounded-xl border-2 transition-all",style:{backgroundColor:eG.darkBg,borderColor:ee?eG.playGreen:eG.highlight+"50",boxShadow:ee?`0 0 0 2px ${eG.playGreen}30`:"none",width:"340px",height:"48px"},children:[(0,t.jsx)("div",{className:"w-12 h-full flex items-center justify-center flex-shrink-0",style:{color:eG.softLight},children:(0,t.jsx)(E,{className:"w-4 h-4"})}),(0,t.jsx)("input",{ref:ev,type:"text",placeholder:"Search games...",value:er,onChange:e=>ea(e.target.value),onFocus:()=>et(!0),onBlur:()=>et(!1),className:"bg-transparent h-full flex-1 focus:outline-none text-sm pr-4",style:{color:eG.softLight}})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl border-2",style:{backgroundColor:eG.darkBg,borderColor:eG.highlight+"40",height:"48px"},children:[(0,t.jsx)("label",{className:"text-sm font-medium",style:{color:eG.highlight},children:"Sort by:"}),(0,t.jsx)("div",{className:"flex gap-1",children:["title","system"].map(e=>(0,t.jsx)("button",{onClick:()=>ec(e),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all active:scale-95 h-9",style:{backgroundColor:en===e?eG.highlight:eG.midDark,color:en===e?eG.darkBg:eG.softLight},children:"title"===e?"Title":"System"},e))}),(0,t.jsx)("button",{onClick:()=>eh("asc"===ed?"desc":"asc"),className:"px-2 py-1 rounded-lg text-sm font-medium transition-all hover:shadow-md active:scale-95 flex items-center justify-center h-9",style:{backgroundColor:eG.midDark,color:eG.softLight},children:(0,t.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:"asc"===ed?(0,t.jsx)(A,{className:"w-4 h-4"}):(0,t.jsx)(L,{className:"w-4 h-4"})})})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3 justify-end items-center",children:ex?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:eD,disabled:0===ef.size,className:"px-4 py-2.5 rounded-lg font-semibold transition-all hover:shadow-md active:scale-95",style:{backgroundColor:"#ef4444",color:eG.softLight,opacity:0===ef.size?.5:1},children:["Delete Selected (",ef.size,")"]}),(0,t.jsx)("button",{onClick:()=>{ep(!1),eu(new Set)},className:"px-5 py-2.5 rounded-lg font-semibold transition-all active:scale-95",style:{backgroundColor:eG.highlight,color:eG.darkBg},children:"Cancel"})]}):(0,t.jsxs)("button",{onClick:eE,className:"px-8 rounded-lg font-semibold transition-all hover:shadow-md active:scale-95 flex items-center gap-2 justify-center",style:{...g(eG.gradientFrom,eG.gradientTo),color:eG.darkBg,height:"48px"},children:[(0,t.jsx)(T,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Add Game"})]})})]})}),"system"===en&&eP&&(0,t.jsx)("div",{children:Object.entries(eP).map(([e,r])=>(0,t.jsxs)("div",{className:"mb-8 last:mb-0",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider pr-3",style:{color:eG.highlight},children:e}),(0,t.jsx)("div",{className:"flex-1 h-px",style:{backgroundColor:eG.highlight+"30"}})]}),(0,t.jsx)("div",{className:"flex flex-wrap",style:{gap:"1rem"},children:r.map((e,a)=>{let l=ey.has(e.id),o=r.slice(0,a).filter(e=>!ey.has(e.id)).length,s=(r.length-1-a)*.03;return(0,t.jsx)("div",{style:{animation:l?`fadeOut 0.3s ease-in-out ${s}s forwards`:`fadeIn 0.5s ease-in-out ${.03*o}s both`},children:(0,t.jsx)(j,{game:e,onPlay:eM,onEdit:eT,onDelete:eF,onSelect:eB,isSelected:ef.has(e.id),isDeleteMode:ex,onEnterDeleteMode:()=>ep(!0),colors:eG})},e.id)})})]},e))}),(!en||"system"!==en)&&(0,t.jsx)("div",{className:"flex flex-wrap",style:{gap:"1rem"},children:eO.map((e,r)=>{let a=ey.has(e.id),l=eO.slice(0,r).filter(e=>!ey.has(e.id)).length,o=(eO.length-1-r)*.03;return(0,t.jsx)("div",{style:{animation:a?`fadeOut 0.3s ease-in-out ${o}s forwards`:`fadeIn 0.5s ease-in-out ${.03*l}s both`},children:(0,t.jsx)(j,{game:e,onPlay:eM,onEdit:eT,onDelete:eF,onSelect:eB,isSelected:ef.has(e.id),isDeleteMode:ex,onEnterDeleteMode:()=>ep(!0),onCoverArtClick:e=>{D(e),I(e),ei(e.coverArtFit||"cover"),_(!0)},colors:eG})},e.id)})})]})]})}),H&&(0,t.jsx)("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-2xl z-60 animate-fade-in p-4 transition-opacity duration-300",onClick:()=>U(null),style:{backgroundColor:"#ef4444",color:eG.softLight,opacity:+!!W,transition:"opacity 0.3s ease-out",pointerEvents:W?"auto":"none"},children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"font-semibold",children:H})]})}),(0,t.jsxs)("footer",{className:"fixed bottom-0 left-0 right-0 h-16 border-t flex items-center justify-between px-6 z-50",style:{backgroundColor:eG.midDark,borderColor:eG.sidebarHover,boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.3)"},children:[(0,t.jsx)("button",{className:"p-2.5 rounded-lg transition-all hover:bg-opacity-50 active:scale-95",onClick:()=>u(!f),style:{color:eG.softLight,backgroundColor:f?eG.sidebarHover:"transparent"},children:f?(0,t.jsx)(S,{className:"w-7 h-7 transition-transform rotate-0"}):(0,t.jsx)(C,{className:"w-7 h-7 transition-transform"})}),(0,t.jsx)("div",{className:"flex-1 mx-4"})]}),(M||G)&&(s={},Object.entries(l).forEach(([e,t])=>{let r=Object.entries(t).filter(([e])=>e.toLowerCase().includes(R.toLowerCase()));r.length>0&&(s[e]=r)}),i=B?.core||P?.core,(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",onClick:()=>ew(),style:{animation:G?"fadeOut 0.2s ease-out":"fadeIn 0.2s ease-out"},children:(0,t.jsxs)("div",{className:"p-6 rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl border",style:{backgroundColor:eG.midDark,borderColor:eG.highlight+"30",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.7)",animation:G?"slideDown 0.2s ease-out":"slideUp 0.3s ease-out"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-3xl font-bold mb-2",style:{color:eG.softLight},children:B?B.title:$.length>1?`Add ${$.length} Games`:"Select System"}),B&&(0,t.jsx)("p",{className:"text-sm opacity-70",style:{color:eG.highlight},children:"Choose a system and cover art"}),$.length>1&&(0,t.jsxs)("p",{className:"text-sm opacity-70",style:{color:eG.highlight},children:["Choose a system for ",$.length," files"]})]}),(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row gap-6 flex-1 min-h-0 overflow-hidden",children:[$.length<=1&&(0,t.jsx)("div",{className:"flex-shrink-0 w-full xl:w-80 space-y-4 max-h-[60vh] xl:max-h-full overflow-y-auto",children:(0,t.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{borderColor:eG.highlight+"30",backgroundColor:eG.darkBg},children:[B?.coverArt||P?.coverArt?(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"aspect-[4/5] w-full overflow-hidden bg-black/20 relative",children:(0,t.jsx)("img",{src:B?.coverArt||P?.coverArt,alt:"Cover art",className:"w-full h-full",style:{objectFit:es,objectPosition:"center"}})}),(0,t.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)("button",{onClick:()=>{if(B){let e=w.map(e=>e.id===B.id?{...e,coverArt:void 0}:e);F(e),localStorage.setItem("games",JSON.stringify(e));let t={...B,coverArt:void 0};D(t),P&&P.id===B.id&&I(t)}else P&&I({...P,coverArt:void 0})},className:"px-3 py-2.5 rounded-lg transition-all hover:shadow-md active:scale-95 flex items-center justify-center",style:{backgroundColor:"#ef4444",color:eG.softLight},children:(0,t.jsx)(v,{className:"w-5 h-5"})})})]}):(0,t.jsx)("div",{className:"aspect-[3/4] w-full flex items-center justify-center bg-gradient-to-br",style:{background:`linear-gradient(135deg, ${eG.darkBg} 0%, ${eG.midDark} 100%)`},children:(0,t.jsxs)("div",{className:"text-center p-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-lg flex items-center justify-center",style:{backgroundColor:eG.highlight+"20"},children:(0,t.jsx)("svg",{className:"w-8 h-8",style:{color:eG.highlight},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsx)("p",{className:"text-sm font-medium",style:{color:eG.softLight},children:"No Cover Art"})]})}),(B?.coverArt||P?.coverArt)&&(0,t.jsx)("div",{className:"p-4 border-t",style:{borderColor:eG.highlight+"30"},children:(0,t.jsx)("button",{onClick:()=>{let e="contain"===es?"cover":"contain";ei(e);if(B&&(B.coverArt||P?.coverArt)){let t=w.map(t=>t.id===B.id?{...t,coverArtFit:e}:t);F(t),localStorage.setItem("games",JSON.stringify(t)),D({...B,coverArtFit:e}),P&&P.id===B.id&&I({...P,coverArtFit:e})}else P&&P.coverArt&&I({...P,coverArtFit:e})},className:"w-full px-4 py-2.5 rounded-lg transition-all text-sm font-semibold text-center active:scale-95",style:{backgroundColor:eG.highlight,color:eG.darkBg},children:"contain"===es?"Zoom to Fill":"Shrink to Fit"})}),(0,t.jsxs)("div",{className:"p-4 border-t",style:{borderColor:eG.highlight+"30"},children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&eL(t)},className:"hidden",id:"cover-art-file-input"}),(0,t.jsx)("label",{htmlFor:"cover-art-file-input",className:"block w-full px-4 py-2.5 rounded-lg transition-all text-sm font-semibold text-center active:scale-95",style:{...B?.coverArt||P?.coverArt?{backgroundColor:eG.highlight}:g(eG.gradientFrom,eG.gradientTo),color:eG.darkBg},children:B?.coverArt||P?.coverArt?"Change Image":"Upload Cover Art"})]})]})}),(0,t.jsxs)("div",{className:`${$.length>1?"w-full":"flex-1"} flex flex-col min-w-0`,children:[(0,t.jsxs)("div",{className:"w-full flex items-center rounded-xl border-2 transition-all mb-4",style:{backgroundColor:eG.darkBg,borderColor:Y?eG.playGreen:eG.highlight+"50",boxShadow:Y?`0 0 0 2px ${eG.playGreen}30`:"none"},children:[(0,t.jsx)("div",{className:"w-10 h-10 flex items-center justify-center flex-shrink-0",style:{color:eG.softLight},children:(0,t.jsx)(E,{className:"w-4 h-4"})}),(0,t.jsx)("input",{type:"text",placeholder:"Search systems...",value:R,onChange:e=>J(e.target.value),onFocus:()=>Q(!0),onBlur:()=>Q(!1),className:"bg-transparent h-10 flex-1 focus:outline-none text-sm pr-4",style:{color:eG.softLight},autoFocus:!0})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto pr-2 scrollbar-hide",children:[Object.entries(s).map(([e,r])=>(0,t.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(0,t.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider pr-3",style:{color:eG.highlight},children:e}),(0,t.jsx)("div",{className:"flex-1 h-px",style:{backgroundColor:eG.highlight+"30"}})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:r.map(([e,r],a)=>{let l=i===r;return(0,t.jsxs)("button",{className:"p-3.5 rounded-xl text-left transition-all active:scale-[0.97] border-2 relative flex items-center justify-between group",style:{backgroundColor:l?eG.highlight:eG.sidebarHover,borderColor:l?eG.highlight:eG.highlight+"30",color:l?eG.darkBg:eG.softLight,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",animation:`fadeIn 0.4s ease-out ${.03*a}s both`},onMouseEnter:e=>{l||(e.currentTarget.style.backgroundColor=eG.highlight+"20",e.currentTarget.style.borderColor=eG.highlight+"50")},onMouseLeave:e=>{l||(e.currentTarget.style.backgroundColor=eG.sidebarHover,e.currentTarget.style.borderColor=eG.highlight+"30")},onClick:()=>eS(r),children:[(0,t.jsx)("span",{className:"font-medium text-sm leading-tight truncate pr-2 flex-1",children:e}),(0,t.jsx)("div",{className:"w-5 h-5 flex-shrink-0 flex items-center justify-center",children:l&&(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},r)})})]},e)),0===Object.keys(s).length&&(0,t.jsxs)("div",{className:"text-center py-16",style:{color:eG.highlight},children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:eG.highlight+"15"},children:(0,t.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,t.jsx)("p",{className:"text-lg font-semibold mb-1",style:{color:eG.softLight},children:"No systems found"}),(0,t.jsx)("p",{className:"text-sm opacity-70",children:"Try a different search term"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",style:{borderColor:eG.highlight+"30"},children:[(B||1===$.length&&P)&&(0,t.jsx)("button",{className:"py-2.5 px-6 rounded-lg font-semibold transition-all active:scale-95",style:{...g(eG.gradientFrom,eG.gradientTo),color:eG.darkBg},onClick:ej,children:"Done"}),(0,t.jsx)("button",{className:"py-2.5 px-6 rounded-lg font-semibold transition-all active:scale-95",style:{backgroundColor:eG.highlight,color:eG.darkBg},onClick:()=>ew(),children:B?"Cancel":"Close"})]})]})}))]}):(0,t.jsx)("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:"#0f0f0f",fontFamily:"Inter, sans-serif"}})})}e.s(["default",()=>F],52683)}]);